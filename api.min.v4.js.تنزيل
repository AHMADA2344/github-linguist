function Deg2Rad(n){return n*Math.PI/180}function PythagorasEquirectangular(n,t,i,r){n=Deg2Rad(n);i=Deg2Rad(i);t=Deg2Rad(t);r=Deg2Rad(r);var u=(r-t)*Math.cos((n+i)/2),f=i-n;return Math.sqrt(u*u+f*f)*6371}function nearestAirportCity(n,t,i,r){var o=99999,u,f,e;for(index=0;index<i.length;++index)f=PythagorasEquirectangular(n,t,i[index].lon,i[index].lat),f<o&&(u=index,o=f);return e=i&&u?r.find(n=>n.code==i[u].stationCode):r[0],e!=undefined?e:r[0]}function convertToDMS(n){var t=n.slice(-1,n.length),i=n.substring(n.length-3,n.length-1),r=n.substring(n.length-5,n.length-3),u=n.substring(0,n.length-5);return u+"° "+r+"' "+i+'" '+t}function checkValid(){var n=!1;return $("#multi-city .form-row.active:last").find("input.single-date-picker, input.tt-input").each(function(){n=$.trim($(this).val())!=""?!0:!1}),n==!0?$("#addFlight").removeClass("disabled"):$("#addFlight").addClass("disabled"),n}function checkFlightLocationInputStatus(){$(".location-select").trigger("change");isRowfilled=$("#from_flight_search").val()!=""&&$("#to_flight_search").val()!=""?!0:!1;isRowfilled==!0?($("#from_flight_search").parents(".form-row").next(".form-row").removeClass("hidden"),$(".switchLocations").addClass("active"),$("#traveladvisory_Body").hasClass("active")?$(".jazeera_backdrop, .tab-panel").removeClass("active"):$(".jazeera_backdrop, .tab-panel").addClass("active")):($("#from_flight_search").parents(".form-row").next(".form-row").addClass("hidden"),$(".switchLocations").removeClass("active"),$(".jazeera_backdrop, .tab-panel").removeClass("active"));checkValid()}function handleErrors(n){if(!n.ok)throw Error(n.statusText);return n.json()}function getPaxTypes(){fetch(settings.middleWareDomainUrl+"/api/jz/v1/GetPassengerDiscountPromoCodes",{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token}}).then(n=>n.json()).then(function(n){n.data.length?(Allcookies.includes("agent_dashboardCookie")&&fetch(settings.middleWareDomainUrl+"/api/jz/v1/IsMarineFareAvailable",{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token}}).then(n=>n.json()).then(function(t){t.statuscode==500&&(IsMarineAvailable=n.data.find(n=>n.ssrCode!="SEMN")!=undefined?!0:!1)}).catch(n=>{console.error("Error:",n)}),Paxtypes=n,setTimeout(()=>{var i,t,s,r,u,f;for(IsMarineAvailable&&(n.data=n.data.filter(n=>n.ssrCode!="SEMN")),localStorage.setItem("PassengerDiscountPromoCodes",JSON.stringify(Paxtypes)),$(".passenger_type").css("display","block"),i=0;i<n.data.length;i++)if(t=n.data[i],s=window.location.href.split("/")[3].split("-")[0],t.isActive){var h=document.getElementById("PaxTypes_return"),c=document.getElementById("PaxTypes_oneway"),l=document.getElementById("PaxTypes_multi"),e=s==="ar"?t.promoNameArabic:t.promoName,o=t.promoCode!=""?t.promoCode:t.promoName;h&&(r=document.createElement("option"),r.text=e,r.value=o,h.appendChild(r));c&&(u=document.createElement("option"),u.text=e,u.value=o,c.appendChild(u));l&&(f=document.createElement("option"),f.text=e,f.value=o,l.appendChild(f));t.promoName=="Student"&&$("#studentcode").css("display","block")}},1500)):$(".passenger_type").css("display","none")})}function clearCookieByName(n){document.cookie=n+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain="+environmentService.environment.mainDomain}function getTokenDetailscookie(n){return fetch(settings.middleWareDomainUrl+"/api/jz/v1/Token",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:n},credentials:"omit"}).then(function(n){return n.ok?n.json().then(function(t){return{status:n.status,data:t}}):{status:n.status,data:n.json()}}).catch(function(n){console.error("Error in fetch:",n);throw n;})}function fixRangeSelection(){$(".month-wrapper").find("table .day.nextMonth, table .day.lastMonth").parent().addClass("invalid-date-td");$(".month-wrapper").find("table .first-date-selected.checked.lastMonth").parent().removeClass("first-date-selected-td");$(".month-wrapper").find("table .last-date-selected.checked.lastMonth").parent().removeClass("last-date-selected-td")}function initOneWayDatePicker(){var i=new Date,t=localStorage.multicityId,f="#"+t+"_range_picker",n="#"+t,e,r,u;f==="#departure_flight_search_muticity2_range_picker"&&n==="#departure_flight_search_muticity2"&&(e=$("#departure_flight_search_muticity1").attr("data-value"),i=new Date(e));$(this).parents().hasClass("hidden-field-group")&&($(this).parents(".form-wrap").index()!==0?(r=$(this).parents(".form-wrap").prev().find(".single-date-picker").attr("data-value"),r&&(i=new Date(r))):(u=$(".sub-panel-data#multi-city .form-wrap.active").find(".single-date-picker").attr("data-value"),u&&(i=new Date(u))));const o=$(n).data("dateRangePicker");o&&o.destroy();try{let r=lowfarecalenderres,e=r?.findIndex(n=>n?.jsonDates),u=[],o=!0;e!==-1?u=r[e]?.jsonDates:(u=r,o=!1);$(n).dateRangePicker({format:"ddd MMM DD YYYY",inline:!0,stickyMonths:!0,container:f,showTopbar:!1,singleDate:!0,"async":!0,startDate:i,hoveringTooltip:!1,singleMonth:!1,alwaysOpen:!0,customArrowPrevSymbol:'<i class="icon icon-arrow-down"><\/i>',customArrowNextSymbol:'<i class="icon icon-arrow-up"><\/i>',beforeShowDay:function(n,t,i){let f=!0,s=0,e=0,h=moment(n).format("L");if(o){if(u&&u?.length>0)if(u?.length&&u?.includes(h)){if(r&&r.length>0)for(let u=0;u<r.length;u++){let o,c=r[0].currencyCode;if($(".Low_Currency_Code").text(c),t&&i){const n=moment(t).month()+1,u=moment(i).month()+1,f=r.filter(t=>t.month===n||t.month===u).map(n=>n.lowestFareInMonth);e=Math.min(...f)}else{const n=moment().month()+1,t=r.filter(t=>t.month===n||t.month===n+1).map(n=>n.lowestFareInMonth);e=Math.min(...t)}o=r[u];let h=o.lowfareDays.find(t=>moment(t.date).format("L")===moment(n).format("L"));if(h){e=Math.round(e);s=Math.round(h.amount);f=!0;break}}}else f=!1}else if(u&&u.length>0){let n=u.includes(h);f=n?!0:!1}return[f,e,s]}}).bind("datepicker-change",function(i,r){var f,e,u;$("#"+t).attr("data-value",r.value);f=window.location.href.split("/")[3].split("-")[0];f==="ar"||f==="ru"?(e=setArabicAndrussianFullDate(r.value),$("#"+t).val(e)):$("#"+t).val(r.value);$("#"+t).attr("data-value",r.value);$(n).parents(".group-field-wrap").find(".range-picker-wrap").removeClass("active");$(n).parents(".daterangepicker-single").find(".float-label-wrapper").addClass("populated");$(n).parents(".daterangepicker-single").removeClass("show-popup");u=i.currentTarget.tabIndex+1;$(this).parents(".sub-panel-data").find('input[tabindex="'+u+'"]').focus();$(this).parents(".sub-panel-data").find('input[tabindex="'+u+'"]').hasClass("dropdown-toggle")&&(navigator.userAgent.match(/iPad|iPhone|Android|BlackBerry|Windows Phone|webOS/i)||$(this).parents(".sub-panel-data").find('input[tabindex="'+u+'"]').next(".dropdown-menu").toggleClass("show"));$(this).parents(".form-wrap").nextAll().find(".single-date-picker").val("");$(this).parents(".form-wrap").nextAll().find(".daterangepicker-single").find(".float-label-wrapper").removeClass("populated");checkValid();$(n).blur()}).click(function(t){$(".dropdown-toggle + .dropdown-menu").removeClass("show");$(".daterangepicker-single").find(".range-picker-wrap").removeClass("active");$(n).parents(".daterangepicker-single").find(".range-picker-wrap").addClass("active");$(".isFlexibleCheckbox").addClass("active");$(n).parents(".daterangepicker-single").addClass("show-popup");t.stopPropagation()});localStorage.swapbutton==="false"&&$(n).data("dateRangePicker").setStart(moment(i).format("ddd MMM DD YYYY"))}catch{}}function setArabicAndrussianFullDate(n){var r=window.location.href.split("/")[3].split("-")[0],t,i;return r==="ar"?(n=new Date(n),t=["يناير","فبراير","مارس","إبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],i=["اﻷحد","اﻷثنين","الثلاثاء","اﻷربعاء","الخميس","الجمعة","السبت"],i[n.getDay()]+", "+n.getDate().toString().padStart(2,"0")+" "+t[n.getMonth()]+" "+n.getFullYear()):r==="ru"?(n=new Date(n),t=["Январь","Февраль"," Март","Апрель"," Май","Июнь"," Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],i=["Воскресенье","Понедельник ","Вторник","Среда","Четверг ","Пятница","Суббота"],i[n.getDay()]+", "+n.getDate().toString().padStart(2,"0")+" "+t[n.getMonth()]+" "+n.getFullYear()):void 0}function initDepartureDatePicker(){const n=$("#departure_flight_search").data("dateRangePicker");n&&n.destroy();const t=$("#return_flight_search").data("dateRangePicker");t&&t.destroy();$("#departure_flight_search").off();$("#return_flight_search").off();try{let n=lowfarecalenderres,i=n?.findIndex(n=>n?.jsonDates),t=[],r=!0;i!==-1?t=n[i]?.jsonDates:(t=n,r=!1);$("#departure_flight_search").length&&($("#departure_flight_search").dateRangePicker({format:"ddd MMM DD YYYY",inline:!0,stickyMonths:!0,container:"#departure_flight_date_range",showTopbar:!1,singleDate:!0,startDate:new Date,hoveringTooltip:!1,singleMonth:!1,alwaysOpen:!0,customArrowPrevSymbol:'<i class="icon icon-arrow-down"><\/i>',customArrowNextSymbol:'<i class="icon icon-arrow-up"><\/i>',beforeShowDay:function(i,u,f){let e=!0,s=0,o=0,h=moment(i).format("L");if(r){if(t&&t?.length>0)if(t?.length&&t?.includes(h)){if(n&&n.length>0)for(let t=0;t<n.length;t++){let r,c=n[0].currencyCode;if($(".Low_Currency_Code").text(c),u&&f){const t=moment(u).month()+1,i=moment(f).month()+1,r=n.filter(n=>n.month===t||n.month===i).map(n=>n.lowestFareInMonth);o=Math.min(...r)}else{const t=moment().month()+1,i=n.filter(n=>n.month===t||n.month===t+1).map(n=>n.lowestFareInMonth);o=Math.min(...i)}r=n[t];let h=r.lowfareDays.find(n=>moment(n.date).format("L")===moment(i).format("L"));if(h){o=Math.round(o);s=Math.round(h.amount);e=!0;break}}}else e=!1}else if(t&&t.length>0){let n=t.includes(h);e=n?!0:!1}return[e,o,s]}}).bind("datepicker-change",function(n,t){var u,i,r;$("#departure_flight_search").val(t.value);$("#departure_flight_search").attr("data-value",t.value);t.value!=null&&t.value!=""&&($("#departure_flight_search-error").hide(),$("#departure_flight_search").parent(".form-field").removeClass("has-error"));$("#departure_flight_search").parent(".form-field").addClass("populated");$("#return_flight_search").data("dateRangePicker").setStart(t.value);$("#return_flight_search").data("dateRangePicker").open();$(this).parents(".group-field-wrap").find(".range-picker-wrap").toggleClass("active");$("#return_flight_search").parents(".group-field-wrap").find(".range-picker-wrap").toggleClass("active");$(".isFlexibleCheckbox").toggleClass("active");u=moment(new Date(t.value),"ddd MMM DD YYYY").add(7,"days");i=moment(u._d).format("ddd MMM DD YYYY");$("#return_flight_search").attr("data-value",i);$("#return_flight_search").val(i);r=window.location.href.split("/")[3].split("-")[0];r==="ar"||r==="ru"?(departure_formated_date=setArabicAndrussianFullDate(t.value),return_formated_date=setArabicAndrussianFullDate(i),$("#departure_flight_search").val(departure_formated_date),$("#return_flight_search").val(return_formated_date)):($("#departure_flight_search").val(t.value),$("#return_flight_search").val(i),$("#departure_flight_search").attr("data-value",t.value),$("#return_flight_search").attr("data-value",i));$("#return_flight_search").blur();$("#departure_flight_search").trigger("change");fixRangeSelection();checkFlightLocationInputStatus()}).bind("datepicker-closed",function(){$("#departure_flight_search").trigger("change")}).bind("datepicker-first-date-selected",function(){firstdateselected=!0;$("#return_flight_search").focus();fixRangeSelection()}).click(function(n){n.stopPropagation();$(".dropdown-toggle + .dropdown-menu").removeClass("show");viewportWidth>991?($(this).parents(".group-field-wrap").find(".range-picker-wrap").toggleClass("active"),$(".isFlexibleCheckbox").toggleClass("active")):($(this).parents(".group-field-wrap").find(".range-picker-wrap").addClass("active"),$(".isFlexibleCheckbox").addClass("active"));$("#return_flight_search").parents(".group-field-wrap").find(".range-picker-wrap").removeClass("active");$(this).parents(".daterangepicker-group").addClass("show-popup");checkFlightLocationInputStatus()}),$('input[tabindex="'+nextTabIndex+'"]').parents(".group-field-wrap").find(".range-picker-wrap").toggleClass("active"),$('input[tabindex="'+nextTabIndex+'"]').parents(".daterangepicker-group").addClass("show-popup"))}catch{}}function formatCurrency(n,t=2,i,r){t=isNaN(t=Math.abs(t))?2:t;i=typeof i=="undefined"?".":i;r=typeof r=="undefined"?",":r;var e=n<0?"-":"",f=String(parseInt(n=Math.abs(Number(n)||0).toFixed(t))),u=(u=f.length)>3?u%3:0;return e+(u?f.substr(0,u)+r:"")+f.substr(u).replace(/(\decSep{3})(?=\decSep)/g,"$1"+r)+(t?i+Math.abs(n-f).toFixed(t).slice(2):"")}function removeTime(n=new Date){return new Date(n.getFullYear(),n.getMonth(),n.getDate())}function bindlowfare(){return new Promise(n=>{lowfarecalenderres=null,firstdateselected||setTimeout(()=>{$(".date-price").remove();var n=document.getElementsByClassName("toMonth valid");Array.from(n).forEach(n=>{var r,i;let t=document.createElement("span"),u=new Date(moment(new Date(+n.getAttribute("time"))));r=removeTime(u);lowfarecalenderres!=null&&lowfarecalenderres.length&&(i=lowfarecalenderres[0].data[0].fares.find(n=>removeTime(new Date(n.key)).toString()==r.toString())?.value||"",t.innerText=i?Math.round(i).toLocaleString("en-US"):"",t.classList.add("date-price"),n.append(t))})},100),$("#return").hasClass("active")&&firstdateselected&&setTimeout(()=>{$(".date-price").remove();var n=document.getElementsByClassName("toMonth valid");Array.from(n).forEach(n=>{var r,i;let t=document.createElement("span"),u=new Date(moment(new Date(+n.getAttribute("time"))));r=removeTime(u);lowfarecalenderres!=null&&lowfarecalenderres.length&&(i=lowfarecalenderres[0].data[1].fares.find(n=>removeTime(new Date(n.key)).toString()==r.toString())?.value||"",t.innerText=i?Math.round(i).toLocaleString("en-US"):"",t.classList.add("date-price"),n.append(t))});firstdateselected=!1;this.initDepartureDatePicker()},100),n()})}function initReturnDatePicker(){const n=$("#return_flight_search").data("dateRangePicker");n&&n.destroy();try{let n=lowfarecalenderresreturn,i=n?.findIndex(n=>n?.jsonDates),t=[],r=!0;i!==-1?t=n[i]?.jsonDates:(t=n,r=!1);$("#return_flight_search").length&&$("#return_flight_search").dateRangePicker({format:"ddd MMM DD YYYY",inline:!0,stickyMonths:!0,container:"#return_flight_date_range",showTopbar:!1,hoveringTooltip:!1,singleMonth:!1,alwaysOpen:!0,startDate:new Date,selectForward:!0,customArrowPrevSymbol:'<i class="icon icon-arrow-down"><\/i>',customArrowNextSymbol:'<i class="icon icon-arrow-up"><\/i>',beforeShowDay:function(i,u,f){let e=!0,s=0,o=0,h=moment(i).format("L");if(r){if(t&&t?.length>0)if(t?.length&&t?.includes(h)){if(n&&n.length>0)for(let t=0;t<n.length;t++){let r,c=n[0].currencyCode;if($(".Low_Currency_Code").text(c),u&&f){const t=moment(u).month()+1,i=moment(f).month()+1,r=n.filter(n=>n.month===t||n.month===i).map(n=>n.lowestFareInMonth);o=Math.min(...r)}else{const t=moment().month()+1,i=n.filter(n=>n.month===t||n.month===t+1).map(n=>n.lowestFareInMonth);o=Math.min(...i)}r=n[t];let h=r.lowfareDays.find(n=>moment(n.date).format("L")===moment(i).format("L"));if(h){o=Math.round(o);s=Math.round(h.amount);e=!0;break}}}else e=!1}else if(t&&t.length>0){let n=t.includes(h);e=n?!0:!1}return[e,o,s]}}).bind("datepicker-change",function(n,t){var r,i,u;$("#departure_flight_search").data("dateRangePicker").setDateRange(t.date1,t.date2,!0);$("#departure_flight_search").attr("data-value",t.date1);$("#return_flight_search").attr("data-value",t.date2);$(this).parents(".group-field-wrap").find(".float-label-wrapper").addClass("populated");r=moment(new Date(t.date1)).format("ddd MMM DD YYYY");i=moment(new Date(t.date2)).format("ddd MMM DD YYYY");$("#checkin_hotel_search").val(r);$("#checkout_hotel_search").val(i);u=window.location.href.split("/")[3].split("-")[0];u==="ar"||u==="ru"?(r=setArabicAndrussianFullDate(r),i=setArabicAndrussianFullDate(i),$("#departure_flight_search").val(r),$("#return_flight_search").val(i)):($("#departure_flight_search").val(r),$("#return_flight_search").val(i));($("#return_flight_search").val(i)!=null||$("#return_flight_search").val(i)!="")&&($("#return_flight_search-error").hide(),$("#return_flight_search").parent(".form-field").removeClass("has-error"));fixRangeSelection();checkFlightLocationInputStatus();$("#return_flight_search").trigger("change");$("#return_flight_search").parents(".group-field-wrap").find(".range-picker-wrap").removeClass("active");$(".isFlexibleCheckbox").removeClass("active");$("#return_flight_search").parents(".daterangepicker-group").removeClass("show-popup");$("#departure_flight_search").parents(".group-field-wrap").find(".range-picker-wrap").hasClass("active")==!1&&($("#passengers_flight_search").focus(),navigator.userAgent.match(/iPad|iPhone|Android|BlackBerry|Windows Phone|webOS/i)||$("#passengers_flight_search").next(".dropdown-menu").toggleClass("show"));$("#return_flight_search").data("dateRangePicker").close()}).bind("datepicker-first-date-selected",function(){fixRangeSelection()}).bind("datepicker-closed",function(){}).click(function(n){n.stopPropagation();$(".dropdown-toggle + .dropdown-menu").removeClass("show");$("#departure_flight_search").parents(".group-field-wrap").find(".range-picker-wrap").removeClass("active");viewportWidth>991?($(this).parents(".group-field-wrap").find(".range-picker-wrap").toggleClass("active"),$(".isFlexibleCheckbox").toggleClass("active")):($(this).parents(".group-field-wrap").find(".range-picker-wrap").addClass("active"),$(".isFlexibleCheckbox").addClass("active"));var t=moment(new Date($("#departure_flight_search").val())).format("ddd MMM DD YYYY"),i=moment(new Date($("#return_flight_search").val())).format("ddd MMM DD YYYY");t!="Invalid date"&&$("#return_flight_search").data("dateRangePicker").setStart(t);$(this).parents(".daterangepicker-group").addClass("show-popup");fixRangeSelection();checkFlightLocationInputStatus();$(".isFlexibleCheckbox").removeClass("active")})}catch{}}function ValidatePromoCodeLogic(n){if($(n).val().length==0)return $(n).parents(".promo-info").removeClass("show"),$(n).parents(".promo-info").prev(".add-promo").removeClass("hide"),$(n).parents("form").find(".btn-wrap .btn").removeAttr("disabled"),$(n).parents("form").find(".promocode-message").hide(),$(n).parent().find(".validate.error").hide(),!0;if($(n).val().length!=0&&$(n).val().length>=2)name=$(n).val(),name=name.replace(/[^a-zA-Z 0-9.]+/g,""),$(n).val(name),$(n).parent().find(".validate").hide(),$(n).parent().find(".validate.loading").show(),validatePromoCode.init($(n),$(n).val());else return $(n).parent().find(".validate.success").hide(),$(n).parent().find(".validate.error").show(),$(n).parent().find(".validate.loading").hide(),$(n).parents("form").find(".btn-wrap .btn").attr("disabled","true"),$(n).parents("form").find(".promocode-message").show(),!1}function SortByStationName(n,t){var i=n.name.toLowerCase(),r=t.name.toLowerCase();return i<r?-1:i>r?1:0}function SortByShortName(n,t){var i=n.shortName.toLowerCase(),r=t.shortName.toLowerCase();return i<r?-1:i>r?1:0}function wordInString(n,t){return new RegExp("\\b"+t+"\\b","i").test(n)}function getCookie(n){const t=n+"=",r=decodeURIComponent(Allcookies),u=r.split("; ");let i;return u.forEach(n=>{n.indexOf(t)===0&&(i=n.substring(t.length))}),i}function isArabic(n){return n==$("html").attr("lang")?!0:!1}function noscroll(){window.scrollTo(0,0)}function bodyFreezeScroll(){window.addEventListener("scroll",noscroll);$("body").css({overflow:"auto","max-height":"inherit"});$("body").addClass("scroll-disabled")}function bodyUnfreezeScroll(){window.removeEventListener("scroll",noscroll);$("body").css({overflow:"auto","max-height":"inherit"});$("body").removeClass("scroll-disabled")}function isheaderActive(){$(".btn-dropdown-menu").hasClass("show")||$(".main-nav > li").hasClass("active")?($(".jazeera_overlay, header").addClass("active"),bodyFreezeScroll()):($(".jazeera_overlay, header").removeClass("active"),bodyUnfreezeScroll())}function issearchActive(){$(".search-box-wrap").hasClass("active")?bodyFreezeScroll():bodyUnfreezeScroll()}function isModifySearchActive(){$(".modify-search-wrap").hasClass("active")?bodyFreezeScroll():bodyUnfreezeScroll()}function Lowfaredata(){var n,t,i;($("#one-way").hasClass("active")||$("#multi-city").hasClass("active"))&&(n="OW");$("#return").hasClass("active")&&(n="RT");t=JSON.parse(sessionStorage.getItem("saveersList"));i=t!=null&&t.actingRole=="WWWC"?!0:!1;fetch(settings.middleWareDomainUrl+"/api/jz/v2/InventoryLeg?origin="+localStorage.from_flight_search+"&destination="+localStorage.to_flight_search+"&isSaversClubMember="+i+"&tripType="+n,{method:"get",headers:{"Content-Type":"application/json",Authorization:settings.token}}).then(n=>n.json()).then(function(n){if($("#one-way").hasClass("active")||$("#multi-city").hasClass("active")){const i=n.filter(n=>n.departure===localStorage.from_flight_search&&n.arrival===localStorage.to_flight_search).map(n=>n.lowfareValues).filter(n=>n.length>0),t=n.filter(n=>n.departure===localStorage.from_flight_search&&n.arrival===localStorage.to_flight_search).flatMap(n=>n.jsonData.dates||[]).map(n=>moment(n).format("L"));this.availableDatesForCalender=i.map(i=>{let r={},u=i.map(n=>n.amount),f=Math.min(...u);return r.month=new Date(i[0].date).getMonth()+1,r.lowestFareInMonth=f,r.lowfareDays=i,r.jsonDates=t,r.currencyCode=n[0]?.currencyCode,r});const r=this.availableDatesForCalender.some(n=>n.currencyCode);r?($(".lowfare").show(),$(".fares_datepicker").show()):($(".lowfare").hide(),$(".fares_datepicker").hide());this.lowfarecalenderres=[];this.lowfarecalenderres=this.availableDatesForCalender&&this.availableDatesForCalender.length>0?this.availableDatesForCalender:t;this.initOneWayDatePicker()}if($("#return").hasClass("active")){const r=n.filter(n=>n.departure==localStorage.from_flight_search&&n.arrival==localStorage.to_flight_search).map(n=>n.lowfareValues).filter(n=>n.length>0),t=n.filter(n=>n.departure===localStorage.from_flight_search&&n.arrival===localStorage.to_flight_search).flatMap(n=>n.jsonData.dates||[]).map(n=>moment(n).format("L"));if(firstinitdeparturedate=!1,!firstinitdeparturedate){this.availableDatesForCalender=r.map(i=>{let r={},u=i.map(n=>n.amount),f=Math.min(...u);return r.month=new Date(i[0].date).getMonth()+1,r.lowestFareInMonth=f,r.lowfareDays=i,r.jsonDates=t,r.currencyCode=n[0].currencyCode,x=r});const i=this.availableDatesForCalender.some(n=>n.currencyCode);i?($(".lowfare").show(),$(".fares_datepicker").show()):($(".lowfare").hide(),$(".fares_datepicker").hide());this.lowfarecalenderres=[];this.lowfarecalenderres=this.availableDatesForCalender&&this.availableDatesForCalender.length>0?this.availableDatesForCalender:t;this.initDepartureDatePicker()}const u=n.filter(n=>n.departure==localStorage.to_flight_search&&n.arrival==localStorage.from_flight_search).map(n=>n.lowfareValues).filter(n=>n.length>0),i=n.filter(n=>n.departure===localStorage.to_flight_search&&n.arrival===localStorage.from_flight_search).flatMap(n=>n.jsonData.dates||[]).map(n=>moment(n).format("L"));this.availableDatesForCalenderRT=u.map(t=>{let r={},u=t.map(n=>n.amount),f=Math.min(...u);return r.month=new Date(t[0].date).getMonth()+1,r.lowestFareInMonth=f,r.lowfareDays=t,r.jsonDates=i,r.currencyCode=n[0].currencyCode,x=r});const f=this.availableDatesForCalenderRT.some(n=>n.currencyCode);f?($(".lowfare").show(),$(".fares_datepicker").show()):($(".lowfare").hide(),$(".fares_datepicker").hide());this.lowfarecalenderresreturn=[];this.lowfarecalenderresreturn=this.availableDatesForCalenderRT&&this.availableDatesForCalenderRT.length>0?this.availableDatesForCalenderRT:i;this.initReturnDatePicker();firstinitdeparturedate=firstinitdeparturedate?!1:!0}})}var settings={graphApiUrl:apiURL+"/api/Postman",middleWareUrl:apiURL+"/api/Postman",middleWareDomainUrl:apiURL,ipInfoService:ipInfoService,token:""},isRowfilled,stationAndMarket,validatePromoCode,windowHeight,viewportWidth;$(document).ready(function(){$(".calendar-date-picker").on("click",function(){localStorage.multicityId="departure_flight_search_muticity1"});$(".calendar-date-picker2").on("click",function(){localStorage.multicityId="departure_flight_search_oneway"});$(".calendar-date-picker1").on("click",function(){localStorage.multicityId="departure_flight_search_muticity2"})});GeoPoint=function(n,t){switch(typeof n){case"number":this.lonDeg=this.dec2deg(n,this.MAX_LON);this.lonDec=n;break;case"string":this.decode(n)&&(this.lonDeg=n);this.lonDec=this.deg2dec(n,this.MAX_LON)}switch(typeof t){case"number":this.latDeg=this.dec2deg(t,this.MAX_LAT);this.latDec=t;break;case"string":this.decode(t)&&(this.latDeg=t);this.latDec=this.deg2dec(t,this.MAX_LAT)}};GeoPoint.prototype={CHAR_DEG:"°",CHAR_MIN:"'",CHAR_SEC:'"',CHAR_SEP:" ",MAX_LON:180,MAX_LAT:90,lonDec:NaN,latDec:NaN,lonDeg:NaN,latDeg:NaN,dec2deg:function(n,t){var e=n<0?-1:1,r=Math.abs(Math.round(n*1e6));if(r>t*1e6)return NaN;var u=r%1e6/1e6,o=Math.floor(r/1e6)*e,f=Math.floor(u*60),s=(u-f/60)*3600,i="";return i+=o,i+=this.CHAR_DEG,i+=this.CHAR_SEP,i+=f,i+=this.CHAR_MIN,i+=this.CHAR_SEP,i+=s.toFixed(2),i+this.CHAR_SEC},deg2dec:function(n){var t=this.decode(n);if(!t)return NaN;var i=parseFloat(t[1]),r=parseFloat(t[2]),u=parseFloat(t[3]);return isNaN(i)||isNaN(r)||isNaN(u)?NaN:i+r/60+u/3600},decode:function(n){var t="";return t+="(-?\\d+)",t+=this.CHAR_DEG,t+="\\s*",t+="(\\d+)",t+=this.CHAR_MIN,t+="\\s*",t+="(\\d+(?:\\.\\d+)?)",t+=this.CHAR_SEC,n.match(new RegExp(t))},getLonDec:function(){return this.lonDec},getLatDec:function(){return this.latDec},getLonDeg:function(){return this.lonDeg},getLatDeg:function(){return this.latDeg}};var stationList=[],stationListWithMarkets=[],marketList=[],countriesList=[],promoCodeStatus=!1,countryList=[],closestAirportData=[],middlewareSectorList=[],searchControlStringMatched=!1,nextTabIndex="",swapbutton=!1,lowfarecalenderresreturn=[],stationsWithLocation=[],lowfarecalenderres=[],firstdateselected=!1,firstinitdeparturedate=!1,lowfares="",lowfaredates=[],Paxtypes=[],IsDohopStation=!1,IsMarineAvailable=!1,AvailableStations=[];$("#addFlight").click(function(n){$('#multi-city .hidden-field-group .form-row:not(".active"):first').addClass("active");$(this).addClass("disabled");$(".form-row.row.form-wrap.active").length==2&&$("#addFlight").hide();n.preventDefault()});isRowfilled=!1;stationAndMarket={init:function(){return this.getToken().then(()=>this.getMiddlewareStationList()).then(()=>Promise.all([this.getStationsWithLocation(),this.getCountries(),this.getuserDetails()])).catch(n=>{console.error("Error initializing:",n);throw n;})},getSaversClubDetails(n){fetch(settings.middleWareDomainUrl+"/api/jz/GetSaverClubMemberDetails",{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:n},credentials:"omit"}).then(n=>n.json()).then(function(n){var t=n;return sessionStorage.setItem("saveersList",JSON.stringify(t)),n}).catch(n=>{console.error("Error fetching savers club details:",n)})},getuserDetails:function(){let n=null;const i=document.cookie.split(";"),t=i.find(n=>n?.includes("tokenCookie"));if(t){const i=t.split("=");i.length===2&&(n=i[1])}let r=document.cookie.split(";").find(n=>n?.includes("loggedInUser"))?!0:!1;if(n&&r){let t=JSON.parse(localStorage.getItem("countriesList"));fetch(settings.middleWareDomainUrl+"/api/jz/v1/GetUserDetails",{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:n},credentials:"omit"}).then(n=>n.json()).then(function(n){var i=n.data;let r=new Date(n.data.userPerson.details.dateOfBirth);i?.userPerson!=null&&dataLayer.push({event:"identity",channel:"Web",currency:"",country:"",pos:"J9WEB",page:window.location.href,title:i.userPerson.name.title,firstname:i.userPerson.name.first,lastname:i.userPerson.name.last,dob:r?r.toISOString().slice(0,22):"",email:i.userPerson.emailAddresses[0].email,City:i?.userPerson?.addresses?.[0]?.city,Nationality:t?t.find(n=>n.countryCode===i.userPerson.details.nationality)?.name??"":"","Country of Residence":t?t.find(n=>n.countryCode===i.userPerson.details.residentCountry)?.name??"":"",mobile:i.userPerson.phoneNumbers[0].number,loginMethod:"member",userType:"member",language:""})})}},getCountries:function(){fetch(settings.graphApiUrl+"/api/v1/Graph",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token},body:JSON.stringify({query:"query GetCountries {resourceCountriesv2 {values {id: countryCode countryCode name defaultCurrencyCode }}}"}),credentials:"omit"}).then(n=>n.json()).then(function(n){for(var t,r=n.data.resourceCountriesv2.values,i=0;i<r.length;i++)t=r[i],countriesList.push({id:t.id,countryCode:t.countryCode,name:t.name,defaultCurrencyCode:t.defaultCurrencyCode}),localStorage.setItem("countriesList",JSON.stringify(countriesList));stationAndMarket.getStation()})},getStation:function(){var u,e,o;if(AvailableStations&&AvailableStations.length>0){for(u=0;u<AvailableStations.length;u++){var n=AvailableStations[u],i="",r="",f="",s=n.cityRussiaName,h=n.countryRussiaName,t=middlewareSectorList.find(t=>t.stationCode===n.stationcode);t!=undefined&&t!=""&&$("#renderingArabicOrEnglish").text()=="en"?i=t.stationName:t!=undefined&&t!=""&&$("#renderingArabicOrEnglish").text()=="ar"?(i=t.cityArabicName,r=t.countryArabicName,f="الجزيرة العالمية"):t!=undefined&&t!=""&&$("#renderingArabicOrEnglish").text()=="ru"&&(i=s,r=h);localStorage.setItem("stationslist",JSON.stringify(middlewareSectorList));e=new GeoPoint(0,0);stationList.push({name:i!=""&&i!=undefined?i:n.stationName,country:r!=""&&r!=undefined?r:n.countryName,code:n.stationcode,cityCode:n.citycode,lon:e.getLonDec(),lat:e.getLatDec(),flag:n.countryCode?.toLowerCase(),markets:n.markets,dohop:n.externalSearchEngine!=undefined?f!=""&&f!=undefined?"الجزيرة العالمية":"Jazeera Global":"",football:n.stationcode=="DOH"?"src=/assets/images/football-icon.png":"style=display:none"})}stationListWithMarkets=stationList;stationList=stationList.filter(n=>n.markets);localStorage.myLat==null||localStorage.myLat=="undefined"||localStorage.myLon==null||localStorage.myLon=="undefined"||localStorage.closestAirportData==null||localStorage.closestAirportData=="undefined"?stationAndMarket.getCurrentLocation():(closestAirportData.push(nearestAirportCity(localStorage.myLat,localStorage.myLon,stationsWithLocation,stationList)),o=stationsWithLocation.findIndex(function(n){n.stationCode==closestAirportData[0].code}),o!==-1&&stationList.splice(stationsWithLocation.findIndex(o),1),stationAndMarket.fillStation())}else fetch(settings.middleWareDomainUrl+"/api/jz/v1/AvailableStations",{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token}}).then(n=>n.json()).then(function(n){for(var o,f=0;f<n.length;f++){var t=n[f],r="",u="",e="",s=t.cityRussiaName,h=t.countryRussiaName,i=middlewareSectorList.find(n=>n.stationCode===t.stationcode);i!=undefined&&i!=""&&$("#renderingArabicOrEnglish").text()=="en"?r=i.stationName:i!=undefined&&i!=""&&$("#renderingArabicOrEnglish").text()=="ar"?(r=i.cityArabicName,u=i.countryArabicName,e="الجزيرة العالمية"):i!=undefined&&i!=""&&$("#renderingArabicOrEnglish").text()=="ru"&&(r=s,u=h);localStorage.setItem("stationslist",JSON.stringify(middlewareSectorList));o=new GeoPoint(0,0);stationList.push({name:r!=""&&r!=undefined?r:t.stationName,country:u!=""&&u!=undefined?u:t.countryName,code:t.stationcode,cityCode:t.citycode,lon:o.getLonDec(),lat:o.getLatDec(),flag:t.countryCode?.toLowerCase(),markets:t.markets,dohop:t.externalSearchEngine!=undefined?e!=""&&e!=undefined?"الجزيرة العالمية":"Jazeera Global":"",football:t.stationcode=="DOH"?"src=/assets/images/football-icon.png":"style=display:none"})}stationListWithMarkets=stationList;stationList=stationList.filter(n=>n.markets)}).then(function(){if(localStorage.myLat==null||localStorage.myLat=="undefined"||localStorage.myLon==null||localStorage.myLon=="undefined"||localStorage.closestAirportData==null||localStorage.closestAirportData=="undefined")stationAndMarket.getCurrentLocation();else{closestAirportData.push(nearestAirportCity(localStorage.myLat,localStorage.myLon,stationsWithLocation,stationList));var n=stationsWithLocation.findIndex(function(n){n.stationCode==closestAirportData[0].code});n!==-1&&stationList.splice(stationsWithLocation.findIndex(n),1);stationAndMarket.fillStation()}})},getStationsWithLocation:function(){try{const n=`query getStations {
            resourceStations {
            values {
                fullName
                shortName
                stationCode
                locationDetails {
                  countryCode
                  cityCode
                  zoneCode
                  coordinates{
                    latitude
                    longitude
                  }
                }
              }
            }
        }`;Promise.all([fetch(settings.graphApiUrl+"/api/v1/Graph",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token},body:JSON.stringify({query:n}),credentials:"omit"}).then(n=>n.json()),fetch(settings.middleWareDomainUrl+"/api/jz/v1/external/travelsearchengine/stationmarkets",{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token}}).then(n=>n.json())]).then(function([t,n]){for(var o,s=t.data.resourceStations.values.sort(SortByShortName),r=0;r<s.length;r++){var i=s[r],h=this.convertToDMS(i.locationDetails.coordinates.latitude),c=this.convertToDMS(i.locationDetails.coordinates.longitude),e=new GeoPoint(h,c),f="",l="",a="",u=middlewareSectorList.find(n=>n.stationCode===i.stationcode);u!=undefined&&u!=""&&$("#renderingArabicOrEnglish").text()=="en"?f=u.stationName:u!=undefined&&u!=""&&$("#renderingArabicOrEnglish").text()=="ar"&&(f=u.cityArabicName,l=u.countryArabicName,a="الجزيرة العالمية");stationsWithLocation.push({name:f!=""&&f!=undefined?f:i.shortName,countryCode:i.locationDetails.countryCode,stationCode:i.stationCode,lon:e.getLonDec(),lat:e.getLatDec()})}for(o=n.data.stations.values,r=0;r<o.length;r++){var i=o[r],h=this.convertToDMS(i.locationDetails.coordinates.latitude),c=this.convertToDMS(i.locationDetails.coordinates.longitude),e=new GeoPoint(h,c);stationsWithLocation.push({name:i.name,countryCode:i.locationDetails.countryCode,stationCode:i.code,lon:e.getLonDec(),lat:e.getLatDec()})}})}catch(n){console.error("Error in getStationsWithLocation function:",n)}},getCurrentLocation:function(){try{fetch(settings.middleWareDomainUrl+"/api/ip/GetIp").then(n=>n.json()).then(function(n){stationAndMarket.getCurrentLatLog(n.IP)}).then(function(){stationAndMarket.fillStation()})}catch(n){console.error("Error in getCurrentLocation function:",n)}},getCurrentLatLog:function(){try{fetch(settings.ipInfoService).then(handleErrors).then(function(n){if(n!=null){myLat=n.lat;myLon=n.lon;closestAirportData.push(nearestAirportCity(myLat,myLon,stationsWithLocation,stationList));localStorage.myLat=n.lat;localStorage.myLon=n.lon;localStorage.closestAirportData=JSON.stringify(closestAirportData);var t=stationList.findIndex(n=>n.stationCode==closestAirportData[0].code);t!==-1&&stationList.splice(stationList.findIndex(t),1)}})}catch(n){console.error("Error in getCurrentLatLog function:",n)}},fillStation:function(){function i(n,i){if(n===""){var r=$.map(closestAirportData,function(n){return n});i(r)}else t.search(n,i)}function r(t,i){if(t===""){var r=$.map(stationList,function(n){return n});i(r)}else n.search(t,i)}var t=new Bloodhound({queryTokenizer:Bloodhound.tokenizers.whitespace,datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name","code"),identify:function(n){if(n!=null&&n.code!=null)return n.code},local:closestAirportData}),n=new Bloodhound({queryTokenizer:Bloodhound.tokenizers.whitespace,datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name","code","country"),identify:function(n){return n.code},local:stationList});n.search=function(n,t){local=this.sorter(this.index.search(n));var i=local.reduce((n,t)=>(n.findIndex(n=>n.code==t.code)==-1&&stationList.filter(n=>n.code==t.code||n.cityCode==t.cityCode).forEach(t=>{n.push(t)}),n),[]);return i&&i.length>0&&(local=i),t(local),this};$(".location-select.to").on("typeahead:selected",function(){});$(".location-select.from").on("keydown",function(n){$(this).attr("data-selected")&&n.key!=="Backspace"&&n.preventDefault()});$(".location-select.from").on("input",function(){$(this).attr("data-selected")&&$(this).removeAttr("data-selected")});$(".location-select.to").on("keydown",function(n){$(this).attr("data-selected")&&n.key!=="Backspace"&&n.preventDefault()});$(".location-select.to").on("input",function(){$(this).attr("data-selected")&&$(this).removeAttr("data-selected")});$(".location-select.from").typeahead({minLength:0,highlight:!0,autoSelect:!0,showHintOnFocus:!0,showDefault:!0,classNames:{open:"is-open",empty:"is-empty",cursor:"is-active",suggestion:"Typeahead-suggestion",selectable:"Typeahead-selectable"}},{name:"current-location",display:function(n){return n.name+" ("+n.code+"), "+n.country},source:i,limit:1,templates:{header:function(){var n=window.location.href.split("/")[3].split("-")[0];return n==="ar"?'<h5 class="league-name">الموقع الحالي<\/h5>':'<h5 class="league-name">Current location<\/h5>'},empty:[""],suggestion:Handlebars.compile('<div class="tt-suggestion" data-code="{{code}}"> <div class="flag-wrap"> <i class="flag-icon flag-icon-{{flag}}"><\/i><\/div>   <div class="suggetion-title"> <div class="country-title">{{name}}<\/div> <div class="country-sub-title">{{country}}<\/div><\/div><span class="flight-code">{{code}}<\/span><span class="location_dohop">{{dohop}}<\/span> <\/div>')}},{name:"airports-list",display:function(n){return n.name+" ("+n.code+"), "+n.country},source:r,limit:1e3,templates:{header:function(){var n=window.location.href.split("/")[3].split("-")[0];return n==="ar"?'<h5 class="league-name">جميع الوجهات<\/h5>':'<h5 class="league-name">All locations<\/h5>'},empty:[""],suggestion:Handlebars.compile('<div class="tt-suggestion" data-code="{{code}}"> <div class="flag-wrap"> <i class="flag-icon flag-icon-{{flag}}"><\/i><\/div>   <div class="suggetion-title"> <div class="country-title">{{name}}<\/div> <div class="country-sub-title">{{country}}<\/div><\/div><span class="flight-code">{{code}}<\/span><span class="location_dohop">{{dohop}}<\/span> <\/div>')}}).on("typeahead:selected",function(n,t){var r=$(this).parents(".locations").parent().find(".location-select.to"),i;stationAndMarket.getMarket(t.code,r);i=n.currentTarget.tabIndex+1;$("#"+n.target.id).attr("data-selected",t.code);$(this).parents(".form-wrap").find('input[tabindex="'+i+'"]').val()==""&&$(this).parents(".form-wrap").find('input[tabindex="'+i+'"]').focus().parents(".locations").addClass("show-popup");$(this).parents(".sub-panel-data").find('input[tabindex="'+i+'"]').hasClass("datepicker")&&($('input[tabindex="'+i+'"]').parents(".group-field-wrap").find(".range-picker-wrap").toggleClass("active"),$('input[tabindex="'+i+'"]').parents(".daterangepicker-group").addClass("show-popup"));$(this).parents(".locations").removeClass("show-popup");$(this).parents(".form-row").find(".locations").removeClass("disabled");$("#from_termsApplyModal_Body>div").removeClass("active");(taFromPopupStationCodes!=undefined||taFromPopupStationCodes!="")&&wordInString(taFromPopupStationCodes,t.code)?(n.target.id=="from_flight_search_muticity2"?$(".from_terms_activate1").addClass("active"):$(".from_terms_activate").addClass("active"),$("#from_"+t.code).addClass("active")):n.target.id=="from_flight_search_muticity2"?$(".from_terms_activate1").removeClass("active"):$(".from_terms_activate").removeClass("active");localStorage.from_flight_search=t.code}).on("typeahead:autocomplete",function(n,t){$("#"+n.target.id).attr("data-selected",t.code);n.target.id=="googleMapTo"&&$("#destinationMapSearch").submit()}).on("click",function(){$(".dropdown-toggle + .dropdown-menu").removeClass("show");$(".range-picker-wrap").removeClass("active");$(this).parents(".locations").addClass("show-popup")}).on("keyup",function(n){var i,t,r;viewportWidth>991&&($(".tt-dataset-current-location")&&(i=$(".tt-dataset-current-location").find(".Typeahead-selectable").attr("data-code"),$(".tt-dataset-airports-list").find(".Typeahead-selectable").filter("[data-code="+i+"]").detach()),($(this).siblings(".tt-menu").find(".country-title").text().toLowerCase().indexOf($(this).val().toLowerCase())>=0||$(this).siblings(".tt-menu").find(".Typeahead-selectable").attr("data-code")&&$(this).siblings(".tt-menu").find(".Typeahead-selectable").attr("data-code").indexOf($(this).val().toUpperCase())>=0)&&(datacodeCount=0,textCount=0,t="",$($(this).siblings(".tt-menu").find(".Typeahead-selectable")).each(function(){$(this).siblings(".tt-menu").find(".country-title").text().toLowerCase().indexOf($(this).val().toLowerCase())>=0&&(textCount++,t=$(this).closest(".Typeahead-suggestion").attr("data-code"))}),textCount==0&&$($(this).siblings(".tt-menu").find(".country-title")).each(function(){$(this).siblings(".tt-menu").find(".Typeahead-selectable").attr("data-code")&&$(this).siblings(".tt-menu").find(".Typeahead-selectable").attr("data-code").indexOf($(this).val().toUpperCase())>=0&&(datacodeCount++,t=$(this).closest(".Typeahead-suggestion").attr("data-code"))}),(textCount==1||datacodeCount==1)&&(searchControlStringMatched=!0,$(this).blur(),r=n.currentTarget.tabIndex+1,$(this).siblings(".tt-menu").find(".Typeahead-selectable").filter("[data-code="+t+"]").trigger("click"),$("#"+n.target.id).attr("data-selected",t))))})},getMarket:function(n,t){var i=stationList.find(function(t){return t.code==n}).markets;marketList=stationListWithMarkets.filter(n=>i.includes(n.code));stationAndMarket.fillMarket(t)},fillMarket:function(n){function i(n,i){if(n===""){var r=$.map(marketList,function(n){return n});i(r)}else t.search(n,i)}var t=new Bloodhound({queryTokenizer:Bloodhound.tokenizers.whitespace,datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name","code","country"),identify:function(n){return n.code},local:marketList});t.search=function(n,t){local=this.sorter(this.index.search(n));var i=local.reduce((n,t)=>(n.findIndex(n=>n.code==t.code)==-1&&stationList.filter(n=>n.code==t.code||n.cityCode==t.cityCode).forEach(t=>{n.push(t)}),n),[]);return i&&i.length>0&&(local=i),t(local),this};$(n).typeahead("destroy");$(n).typeahead({minLength:0,highlight:!0,autoSelect:!0,showHintOnFocus:!0,showDefault:!0,classNames:{open:"is-open",empty:"is-empty",cursor:"is-active",suggestion:"Typeahead-suggestion",selectable:"Typeahead-selectable"}},{name:"airports-list",display:function(n){return n.name+" ("+n.code+"), "+n.country},source:i,limit:1e3,templates:{header:function(){var n=window.location.href.split("/")[3].split("-")[0];return n==="ar"?'<h5 class="league-name">جميع الوجهات<\/h5>':'<h5 class="league-name">All locations<\/h5>'},empty:[""],suggestion:Handlebars.compile('<div class="tt-suggestion" data-code="{{code}}"> <div class="flag-wrap"> <i class="flag-icon flag-icon-{{flag}}"><\/i><\/div>   <div class="suggetion-title"> <div class="country-title">{{name}}<\/div> <div class="country-sub-title">{{country}}<\/div><\/div><span class="flight-code">{{code}}<\/span><span class="location_dohop">{{dohop}}<\/span> <\/div>')}}).on("typeahead:selected",function(n,t){var i,r,u;nextTabIndex=n.currentTarget.tabIndex+1;$("#"+n.target.id).attr("data-selected",t.code);checkFlightLocationInputStatus();$(this).parents(".locations").removeClass("show-popup");$("#to_termsApplyModal_Body>div").removeClass("active");$("#traveladvisory_Body>div").removeClass("active");(taToPopupStationCodes!=undefined||taToPopupStationCodes!="")&&wordInString(taToPopupStationCodes,t.code)?(n.target.id=="to_flight_search_muticity2"?$(".to_terms_activate1").addClass("active"):$(".to_terms_activate").addClass("active"),$("#to_"+t.code).addClass("active")):n.target.id=="to_flight_search_muticity2"?$(".to_terms_activate1").removeClass("active"):$(".to_terms_activate").removeClass("active");$("#one-way").hasClass("active")||$("#one-way").hasClass("active")?($("#Destination_").addClass("active"),$("#fromDirect_").addClass("active")):$("#return").hasClass("active")?($("#Destination_").addClass("active"),$("#fromDirect_").addClass("active"),$("#toDirect_").addClass("active")):($("#Destination_").addClass("active"),$("#fromDirect_").addClass("active"),$("#toDirect_").addClass("active"));taToDirectPopupStationCodes!=undefined||taToDirectPopupStationCodes!=""||taFromDirectPopupStationCodes!=undefined||taFromDirectPopupStationCodes!=""||wordInString(taFromDirectPopupStationCodes,$("#from_flight_search").attr("data-selected"))||wordInString(taToDirectPopupStationCodes,t.code)||wordInString(taToDirectPopupStationCodes,$("#from_flight_search").attr("data-selected"))||wordInString(taToDirectPopupStationCodes,$("#to_flight_search_oneway").attr("data-selected"))||wordInString(taFromDirectPopupStationCodes,t.code)||wordInString(taFromDirectPopupStationCodes,$("#from_flight_search_oneway").attr("data-selected"))||wordInString(taFromDirectPopupStationCodes,$("#from_flight_search_muticity1").attr("data-selected"))||wordInString(taToDirectPopupStationCodes,$("#to_flight_search_muticity1").attr("data-selected"))||wordInString(taFromDirectPopupStationCodes,$("#from_flight_search_muticity2").attr("data-selected"))||wordInString(taToDirectPopupStationCodes,$("#to_flight_search_muticity2").attr("data-selected"))?($("#one-way").hasClass("active")||$("#one-way").hasClass("active")?($("#fromDirect_"+$("#from_flight_search_oneway").attr("data - selected")).addClass("active"),$("#toDirect_"+t.code).addClass("active")):$("#return").hasClass("active")?($("#fromDirect_"+$("#from_flight_search").attr("data-selected")).addClass("active"),$("#toDirect_"+t.code).addClass("active"),$("#fromDirect1_"+t.code).addClass("active"),$("#toDirect1_"+$("#from_flight_search").attr("data-selected")).addClass("active")):($("#fromDirect1_"+$("#from_flight_search_muticity2").attr("data-selected")).addClass("active"),$("#toDirect1_"+$("#to_flight_search_muticity2").attr("data-selected")).addClass("active"),$("#fromDirect_"+$("#from_flight_search_muticity1").attr("data-selected")).addClass("active"),$("#toDirect_"+$("#to_flight_search_muticity1").attr("data-selected")).addClass("active"),localStorage.from_flight_searchmulticity1=$("#from_flight_search_muticity1").attr("data-selected"),localStorage.to_flight_searchmulticity1=$("#to_flight_search_muticity1").attr("data-selected"),localStorage.from_flight_searchmulticity2=$("#from_flight_search_muticity2").attr("data-selected"),localStorage.to_flight_searchmulticity2=$("#to_flight_search_muticity2").attr("data-selected")),$(".travel-advisory div").hasClass("active")?($("#traveladvisory_Body").addClass("active"),$("section.destination-banner").css("margin-top","0px"),$("#traveladvisory_Body").show(),$(".inline-message").show()):($("#traveladvisory_Body").removeClass("active"),$("section.destination-banner").css("margin-top","-80px"),$("#traveladvisory_Body").hide(),$(".inline-message").hide()),$(".jazeera_backdrop").removeClass("active"),$(".advisory-space1 div").hasClass("active")?$(".advisory-space1").show():$(".advisory-space1").hide(),$(".advisory-space div").hasClass("active")?$(".advisory-space").show():$(".advisory-space").hide(),$(".advisory-space2 div").hasClass("active")?$(".advisory-space2").show():$(".advisory-space2").hide(),$(".advisory-space3 div").hasClass("active")?$(".advisory-space3").show():$(".advisory-space3").hide()):($("#traveladvisory_Body").hide(),$("#traveladvisory_Body").removeClass("active"),$("#toDirect_"+t.code).removeClass("active"),$(".jazeera_backdrop").removeClass("active"),$("#fromDirect_"+localStorage.from_flight_search).removeClass("active"),$(".inline-message").hide());localStorage.to_flight_search=t.code;localStorage.from_flight_search&&localStorage.to_flight_search&&localStorage.to_flight_search.length==3&&(($("#one-way").hasClass("active")||$("#multi-city").hasClass("active"))&&(i="OW"),$("#return").hasClass("active")&&(i="RT"),r=JSON.parse(sessionStorage.getItem("saveersList")),u=r!=null&&r.actingRole=="WWWC"?!0:!1,fetch(settings.middleWareDomainUrl+"/api/jz/v2/InventoryLeg?origin="+localStorage.from_flight_search+"&destination="+localStorage.to_flight_search+"&isSaversClubMember="+u+"&tripType="+i,{method:"get",headers:{"Content-Type":"application/json",Authorization:settings.token}}).then(n=>n.json()).then(function(n){if($("#one-way").hasClass("active")||$("#multi-city").hasClass("active")){const i=n.filter(n=>n.departure===localStorage.from_flight_search&&n.arrival===localStorage.to_flight_search).map(n=>n.lowfareValues).filter(n=>n.length>0),t=n.filter(n=>n.departure===localStorage.from_flight_search&&n.arrival===localStorage.to_flight_search).flatMap(n=>n.jsonData.dates||[]).map(n=>moment(n).format("L"));this.availableDatesForCalender=i.map(i=>{let r={},u=i.map(n=>n.amount),f=Math.min(...u);return r.month=new Date(i[0].date).getMonth()+1,r.lowestFareInMonth=f,r.lowfareDays=i,r.jsonDates=t,r.currencyCode=n[0]?.currencyCode,r});const r=this.availableDatesForCalender.some(n=>n.currencyCode);r?($(".lowfare").show(),$(".fares_datepicker").show()):($(".lowfare").hide(),$(".fares_datepicker").hide());this.lowfarecalenderres=this.availableDatesForCalender&&this.availableDatesForCalender.length>0?this.availableDatesForCalender:t;this.initOneWayDatePicker()}if($("#return").hasClass("active")){const r=n.filter(n=>n.departure==localStorage.from_flight_search&&n.arrival==localStorage.to_flight_search).map(n=>n.lowfareValues).filter(n=>n.length>0),t=n.filter(n=>n.departure===localStorage.from_flight_search&&n.arrival===localStorage.to_flight_search).flatMap(n=>n.jsonData.dates||[]).map(n=>moment(n).format("L"));if(!firstinitdeparturedate){this.availableDatesForCalender=r.map(i=>{let r={},u=i.map(n=>n.amount),f=Math.min(...u);return r.month=new Date(i[0].date).getMonth()+1,r.lowestFareInMonth=f,r.lowfareDays=i,r.jsonDates=t,r.currencyCode=n[0].currencyCode,x=r});const i=this.availableDatesForCalender.some(n=>n.currencyCode);i?($(".lowfare").show(),$(".fares_datepicker").show()):($(".lowfare").hide(),$(".fares_datepicker").hide());this.lowfarecalenderres=this.availableDatesForCalender&&this.availableDatesForCalender.length>0?this.availableDatesForCalender:t;this.initDepartureDatePicker()}const u=n.filter(n=>n.departure==localStorage.to_flight_search&&n.arrival==localStorage.from_flight_search).map(n=>n.lowfareValues).filter(n=>n.length>0),i=n.filter(n=>n.departure===localStorage.to_flight_search&&n.arrival===localStorage.from_flight_search).flatMap(n=>n.jsonData.dates||[]).map(n=>moment(n).format("L"));this.availableDatesForCalenderRT=u.map(t=>{let r={},u=t.map(n=>n.amount),f=Math.min(...u);return r.month=new Date(t[0].date).getMonth()+1,r.lowestFareInMonth=f,r.lowfareDays=t,r.jsonDates=i,r.currencyCode=n[0].currencyCode,x=r});const f=this.availableDatesForCalenderRT.some(n=>n.currencyCode);f?($(".lowfare").show(),$(".fares_datepicker").show()):($(".lowfare").hide(),$(".fares_datepicker").hide());this.lowfarecalenderresreturn=this.availableDatesForCalenderRT&&this.availableDatesForCalenderRT.length>0?this.availableDatesForCalenderRT:i;this.initReturnDatePicker();firstinitdeparturedate=firstinitdeparturedate?!1:!0}$(".range-picker-wrap").show()}).catch(function(){($("#one-way").hasClass("active")||$("#multi-city").hasClass("active"))&&(localStorage.calender_available_dates="",this.initOneWayDatePicker());$("#return").hasClass("active")&&(localStorage.availableDatesForCalender="",this.initDepartureDatePicker(),localStorage.availableDatesForCalenderRT="",this.initReturnDatePicker());$(".range-picker-wrap").show()}));$("#departure_flight_search_oneway").on("click",function(){var t,n,i;firstdateselected=!1;$("#one-way").hasClass("active")&&(t="OW");n=JSON.parse(sessionStorage.getItem("saveersList"));i=n!=null&&n.actingRole=="WWWC"?!0:!1;fetch(settings.middleWareDomainUrl+"/api/jz/v2/InventoryLeg?origin="+localStorage.from_flight_search+"&destination="+localStorage.to_flight_search+"&isSaversClubMember="+i+"&tripType="+t,{method:"get",headers:{"Content-Type":"application/json",Authorization:settings.token}}).then(n=>n.json()).then(n=>{if($("#one-way").hasClass("active")){const t=n.filter(n=>n.departure==localStorage.from_flight_search&&n.arrival==localStorage.to_flight_search).map(n=>n.lowfareValues).filter(n=>n.length>0),i=n.filter(n=>n.departure===localStorage.from_flight_search&&n.arrival===localStorage.to_flight_search).flatMap(n=>n.jsonData.dates||[]).map(n=>moment(n).format("L"));t.length!==0?($(".lowfare").show(),$(".fares_datepicker").show(),firstinitdeparturedate||(this.availableDatesForCalender=t.map(t=>{let r={},u=t.map(n=>n.amount),f=Math.min(...u);return r.month=new Date(t[0].date).getMonth()+1,r.lowestFareInMonth=f,r.jsonDates=i,r.lowfareDays=t,r.currencyCode=n[0].currencyCode,r}),this.lowfarecalenderres=[],this.lowfarecalenderres=this.availableDatesForCalender,this.initOneWayDatePicker())):(this.lowfarecalenderres=[],this.lowfarecalenderres=this.availableDatesForCalender&&this.availableDatesForCalender.length>0?this.availableDatesForCalender:i,this.initOneWayDatePicker(),$(".lowfare").hide(),$(".fares_datepicker").hide())}})});$("#departure_flight_search_muticity1").on("click",()=>{var t,n,i,r,u;firstdateselected=!1;localStorage.swapbutton=!0;$("#multi-city").hasClass("active")&&(t="OW");n=JSON.parse(sessionStorage.getItem("saveersList"));i=n!=null&&n.actingRole=="WWWC"?!0:!1;r=$("#from_flight_search_muticity1").attr("data-selected");u=$("#to_flight_search_muticity1").attr("data-selected");localStorage.from_flight_search=r;localStorage.to_flight_search=u;fetch(settings.middleWareDomainUrl+"/api/jz/v2/InventoryLeg?origin="+localStorage.from_flight_search+"&destination="+localStorage.to_flight_search+"&isSaversClubMember="+i+"&tripType="+t,{method:"get",headers:{"Content-Type":"application/json",Authorization:settings.token}}).then(n=>n.json()).then(function(n){if($("#multi-city").hasClass("active")){const t=n.filter(n=>n.departure==localStorage.from_flight_search&&n.arrival==localStorage.to_flight_search).map(n=>n.lowfareValues).filter(n=>n.length>0),i=n.filter(n=>n.departure===localStorage.from_flight_search&&n.arrival===localStorage.to_flight_search).flatMap(n=>n.jsonData.dates||[]).map(n=>moment(n).format("L"));t.length!==0?($(".lowfare").show(),$(".fares_datepicker").show(),firstinitdeparturedate||(this.availableDatesForCalender=t.map(t=>{let r={},u=t.map(n=>n.amount),f=Math.min(...u);return r.month=new Date(t[0].date).getMonth()+1,r.lowestFareInMonth=f,r.lowfareDays=t,r.jsonDates=i,r.currencyCode=n[0].currencyCode,r}),this.lowfarecalenderres=[],this.lowfarecalenderres=this.availableDatesForCalender,this.initOneWayDatePicker())):(this.lowfarecalenderres=[],this.lowfarecalenderres=i,this.initOneWayDatePicker(),$(".lowfare").hide(),$(".fares_datepicker").hide())}})});$("#departure_flight_search_muticity2").on("click",()=>{var t,n,i,r,u;firstdateselected=!1;localStorage.swapbutton=!0;$("#multi-city").hasClass("active")&&(t="OW");n=JSON.parse(sessionStorage.getItem("saveersList"));i=n!=null&&n.actingRole=="WWWC"?!0:!1;r=$("#from_flight_search_muticity2").attr("data-selected");u=$("#to_flight_search_muticity2").attr("data-selected");localStorage.from_flight_search=r;localStorage.to_flight_search=u;fetch(settings.middleWareDomainUrl+"/api/jz/v2/InventoryLeg?origin="+localStorage.from_flight_search+"&destination="+localStorage.to_flight_search+"&isSaversClubMember="+i+"&tripType="+t,{method:"get",headers:{"Content-Type":"application/json",Authorization:settings.token}}).then(n=>n.json()).then(function(n){if($("#multi-city").hasClass("active")){const t=n.filter(n=>n.departure==localStorage.from_flight_search&&n.arrival==localStorage.to_flight_search).map(n=>n.lowfareValues).filter(n=>n.length>0),i=n.filter(n=>n.departure===localStorage.from_flight_search&&n.arrival===localStorage.to_flight_search).flatMap(n=>n.jsonData.dates||[]).map(n=>moment(n).format("L"));t.length!==0?($(".lowfare").show(),$(".fares_datepicker").show(),firstinitdeparturedate||(this.availableDatesForCalender=t.map(t=>{let r={},u=t.map(n=>n.amount),f=Math.min(...u);return r.month=new Date(t[0].date).getMonth()+1,r.lowestFareInMonth=f,r.lowfareDays=t,r.jsonDates=i,r.currencyCode=n[0].currencyCode,r}),this.lowfarecalenderres=[],this.lowfarecalenderres=this.availableDatesForCalender,this.initOneWayDatePicker())):($(".lowfare").hide(),$(".fares_datepicker").hide(),this.lowfarecalenderres=[],this.lowfarecalenderres=i,this.initOneWayDatePicker())}})});$("#departure_flight_search").on("click",()=>{var t,n,i;firstdateselected=!1;$("#return").hasClass("active")&&(t="RT");n=JSON.parse(sessionStorage.getItem("saveersList"));i=n!=null&&n.actingRole=="WWWC"?!0:!1;fetch(settings.middleWareDomainUrl+"/api/jz/v2/InventoryLeg?origin="+localStorage.from_flight_search+"&destination="+localStorage.to_flight_search+"&isSaversClubMember="+i+"&tripType="+t,{method:"get",headers:{"Content-Type":"application/json",Authorization:settings.token}}).then(n=>n.json()).then(function(n){if($("#return").hasClass("active")){const t=n.filter(n=>n.departure==localStorage.from_flight_search&&n.arrival==localStorage.to_flight_search).map(n=>n.lowfareValues).filter(n=>n.length>0),i=n.filter(n=>n.departure===localStorage.from_flight_search&&n.arrival===localStorage.to_flight_search).flatMap(n=>n.jsonData.dates||[]).map(n=>moment(n).format("L"));t.length!==0?($(".lowfare").show(),$(".fares_datepicker").show(),firstinitdeparturedate||(this.availableDatesForCalender=t.map(t=>{let r={},u=t.map(n=>n.amount),f=Math.min(...u);return r.month=new Date(t[0].date).getMonth()+1,r.lowestFareInMonth=f,r.lowfareDays=t,r.jsonDates=i,r.currencyCode=n[0].currencyCode,x=r}),this.lowfarecalenderres=[],this.lowfarecalenderres=this.availableDatesForCalender,this.initDepartureDatePicker())):(lowfarecalenderres=[],this.lowfarecalenderres=i,this.initDepartureDatePicker(),$(".lowfare").hide(),$(".fares_datepicker").hide())}})});$("#return_flight_search").on("click",()=>{var t,n,i;$("#return").hasClass("active")&&(t="RT");n=JSON.parse(sessionStorage.getItem("saveersList"));i=n!=null&&n.actingRole=="WWWC"?!0:!1;fetch(settings.middleWareDomainUrl+"/api/jz/v2/InventoryLeg?origin="+localStorage.from_flight_search+"&destination="+localStorage.to_flight_search+"&isSaversClubMember="+i+"&tripType="+t,{method:"get",headers:{"Content-Type":"application/json",Authorization:settings.token}}).then(n=>n.json()).then(function(n){if($("#return").hasClass("active")){const i=n.filter(n=>n.departure==localStorage.to_flight_search&&n.arrival==localStorage.from_flight_search).map(n=>n.lowfareValues).filter(n=>n.length>0),t=n.filter(n=>n.departure===localStorage.from_flight_search&&n.arrival===localStorage.to_flight_search).flatMap(n=>n.jsonData.dates||[]).map(n=>moment(n).format("L"));i.length!==0?this.availableDatesForCalenderRT=i.map(i=>{let r={},u=i.map(n=>n.amount),f=Math.min(...u);return r.month=new Date(i[0].date).getMonth()+1,r.lowestFareInMonth=f,r.lowfareDays=i,r.jsonDates=t,r.currencyCode=n[0].currencyCode,x=r}):(lowfarecalenderresreturn=[],this.lowfarecalenderresreturn=t,this.initReturnDatePicker()(),$(".lowfare").hide(),$(".fares_datepicker").hide());lowfarecalenderresreturn=[];this.availableDatesForCalenderRT&&this.availableDatesForCalenderRT.length>0?this.lowfarecalenderres=this.availableDatesForCalenderRT:this.lowfarecalenderresreturn=t;this.initReturnDatePicker();firstinitdeparturedate=firstinitdeparturedate?!1:!0}})});$(this).parents(".sub-panel-data").find('input[tabindex="'+nextTabIndex+'"]').hasClass("datepicker")&&$('input[tabindex="'+nextTabIndex+'"]').parents(".group-field-wrap").find(".range-picker-wrap").hasClass("active")&&($('input[tabindex="'+nextTabIndex+'"]').parents(".group-field-wrap").find(".range-picker-wrap").removeClass("active"),$('input[tabindex="'+nextTabIndex+'"]').parents(".daterangepicker-group").removeClass("show-popup"));($(this).parents(".form-wrap").find('input[tabindex="'+nextTabIndex+'"]').hasClass("single-date-picker")||$(this).parents(".form-wrap").find('input[tabindex="'+nextTabIndex+'"]').hasClass("flight-status-datepicker")||$(this).parents(".form-wrap").find('input[tabindex="'+nextTabIndex+'"]').hasClass("single-date-picker-schedule"))&&($(this).parents(".form-wrap").find('input[tabindex="'+nextTabIndex+'"]').parents(".daterangepicker-single").find(".range-picker-wrap").hasClass("active")&&($(this).parents(".form-wrap").find('input[tabindex="'+nextTabIndex+'"]').parents(".daterangepicker-single").find(".range-picker-wrap").removeClass("active"),$(this).parents(".form-wrap").find('input[tabindex="'+nextTabIndex+'"]').parents(".daterangepicker-single").removeClass("show-popup")),$(this).parents(".form-wrap").find('input[tabindex="'+nextTabIndex+'"]').parents(".daterangepicker-single").find(".range-picker-wrap").addClass("active"),$(this).parents(".form-wrap").find('input[tabindex="'+nextTabIndex+'"]').parents(".daterangepicker-single").parents(".group-field").removeClass("hidden"),$(this).parents(".form-wrap").find('input[tabindex="'+nextTabIndex+'"]').parents(".daterangepicker-single").addClass("show-popup"),$(this).parents(".form-wrap").find('input[tabindex="'+nextTabIndex+'"]').focus().trigger("click"),$(".range-picker-wrap").hide())}).on("click",function(){$(".dropdown-toggle + .dropdown-menu").removeClass("show");$(".range-picker-wrap").removeClass("active");$(this).parents(".locations").addClass("show-popup")}).on("keyup",function(n){if(viewportWidth>991&&($(this).siblings(".tt-menu").find(".country-title").text().toLowerCase().indexOf($(this).val().toLowerCase())>=0||$(this).siblings(".tt-menu").find(".Typeahead-selectable").attr("data-code")&&$(this).siblings(".tt-menu").find(".Typeahead-selectable").attr("data-code").indexOf($(this).val().toUpperCase())>=0)){datacodeCount=0;textCount=0;var t="";$($(this).siblings(".tt-menu").find(".Typeahead-selectable")).each(function(){$(this).siblings(".tt-menu").find(".country-title").text().toLowerCase().indexOf($(this).val().toLowerCase())>=0&&(textCount++,t=$(this).closest(".Typeahead-suggestion").attr("data-code"))});textCount==0&&$($(this).siblings(".tt-menu").find(".country-title")).each(function(){$(this).siblings(".tt-menu").find(".Typeahead-selectable").attr("data-code")&&$(this).siblings(".tt-menu").find(".Typeahead-selectable").attr("data-code").indexOf($(this).val().toUpperCase())>=0&&(datacodeCount++,t=$(this).closest(".Typeahead-suggestion").attr("data-code"))});(textCount==1||datacodeCount==1)&&($(this).blur(),$(this).siblings(".tt-menu").find(".Typeahead-selectable").filter("[data-code="+t+"]").trigger("click"),$("#"+n.target.id).attr("data-selected",t))}});searchControlStringMatched&&($(n[1]).parent().next().trigger("click"),searchControlStringMatched=!1);$(n).focus().parents(".locations").addClass("show-popup")},getToken:async function(){var u,r,i,n,t;try{if(Allcookies.includes("agent_dashboardCookie")){u=getCookie("agent_dashboardCookie");let i=await getTokenDetailscookie(u);i.status!=200?(clearCookieByName("agent_dashboardCookie"),clearCookieByName("loggedInUser"),clearCookieByName("isAgent"),clearCookieByName("tokenCookie"),window.location.reload(!0),n=new XMLHttpRequest,n.open("POST",settings.middleWareUrl+"/api/nsk/v1/token",!1),n.setRequestHeader("Content-type","application/json"),n.send(),t=JSON.parse(n.responseText),settings.token=t.data.token):(settings.token=u,stationAndMarket.AgentDetails())}else if(Allcookies.includes("tokenCookie")){r=getCookie("tokenCookie");let u=await getTokenDetailscookie(r);u.status!=200?(clearCookieByName("tokenCookie"),clearCookieByName("loggedInUser"),sessionStorage.removeItem("saveersList"),window.location.reload(!0),n=new XMLHttpRequest,n.open("POST",settings.middleWareUrl+"/api/nsk/v1/token",!1),n.setRequestHeader("Content-type","application/json"),n.send(),t=JSON.parse(n.responseText),settings.token=t.data.token):(settings.token=r,u.data!=""&&(i=u.data,i&&i.data&&i.data.roles&&i.data.roles.acting&&i.data.roles.acting.roleCode=="WWWC"&&stationAndMarket.getSaversClubDetails(r).then(n=>{sessionStorage.setItem("saveersList",JSON.stringify(n))}).catch(n=>{console.error("Error fetching Savers Club details:",n)})))}else n=new XMLHttpRequest,n.open("POST",settings.middleWareUrl+"/api/nsk/v1/token",!1),n.setRequestHeader("Content-type","application/json"),n.send(),t=JSON.parse(n.responseText),settings.token=t.data.token;getPaxTypes()}catch(f){console.error("Error in getToken function:",f)}},getMiddlewareStationList:function(){try{fetch(settings.middleWareDomainUrl+"/api/jz/v1/AvailableStations",{method:"get",headers:{"Content-Type":"application/json"}}).then(n=>n.json()).then(function(n){var i,t;for(AvailableStations=n,i=0;i<n.length;i++)t=n[i],middlewareSectorList.push({stationCode:t.stationcode,stationName:t.stationName,countryName:t.countryName,cityArabicName:t.stationCityArabicName,countryArabicName:t.countryArabicName,cityRussianName:t.cityRussiaName,countryRussianName:t.countryRussiaName,markets:t.markets})})}catch(n){console.error("Error in getMiddlewareStationList function:",n)}},AgentDetails:function(){try{fetch(settings.middleWareDomainUrl+"/api/jz/v1/Token",{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token},credentials:"omit"}).then(n=>n.json()).then(function(n){if(n.errors)$(".logout-message").modal("show");else{var t=n.data.identity.organization,i=n.data.identity.userKey;fetch(settings.middleWareDomainUrl+"/api/Agent/v1/UserPersonDetails?userKey="+i,{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token},credentials:"omit"}).then(n=>n.json()).then(function(n){var t="";n.userDetails&&(t=n.userDetails.data.users.username);$(".header-inner  .agent-id").append('<a><img src="/WebpImg/ID.webp" width="50" height="20"/><b>'+t+"<\/b><\/a>");$(".mobile-agent-menu .agent-id").append('<a><img src="/WebpImg/ID.webp" width="20" height="20" /><b>'+t+"<\/b><\/a>")});fetch(settings.middleWareDomainUrl+"/api/Agent/v1/AgencyCreditDetails?OrganizationCode="+t,{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token},credentials:"omit"}).then(n=>n.json()).then(function(n){var t="";n.data!=undefined&&n.data.organizations2Account!=undefined?n.data.organizations2Account.status=="Open"?t=n.data.organizations2Account.currencyCode+" "+n.data.organizations2Account.totalAvailable:(t="Closed",$(".agency-credit").addClass("agency-closed")):t="0.00";$(".header-inner .agency-credit").append('<a><img src="/WebpImg/Wallet.webp" width="20" height="20" /><b>'+t+"<\/b><\/a>");$(".mobile-agent-menu .agency-credit").append('<a><img src="/WebpImg/Wallet.webp" width="20" height="20" /><b>'+t+"<\/b><\/a>")});fetch(settings.middleWareDomainUrl+"/api/Agent/v1/GetOrganizationDetails?OrganizationCode="+t,{method:"get",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token},credentials:"omit"}).then(n=>n.json()).then(function(n){var t=n.data.organization2.company.name,i="";i=t.length>12?t.substring(0,12)+"...":t;$(".header-inner .top-nav span").append("<b>"+i+"<\/b>");$(".mobile-agent-menu span").append("<b>"+t+"<\/b>")})}})}catch(n){console.error("Error in AgentDetails function:",n)}}};this.stationAndMarket.init().then(()=>{console.log("Initialization complete")}).catch(n=>{console.error("Initialization failed:",n)});validatePromoCode={init:function(n,t){this.validateCode(n,t.toUpperCase())},validateCode:function(n,t){const i=`query promoCodeValidate {
        promotionValidate(promotionCode: "${t}")
      }`;fetch(settings.graphApiUrl+"/api/v1/Graph",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token},body:JSON.stringify({query:i}),credentials:"omit"}).then(n=>n.json()).then(function(t){if(t.data&&t.data.promotionValidate)$(n).parent().find(".validate.success").show(),$(n).parent().find(".validate.error").hide(),$(n).parent().find(".validate.loading").hide(),$(n).parents("form").find(".btn-wrap .btn").removeAttr("disabled"),$(n).parents("form").find(".promocode-message").hide();else return $(n).parent().find(".validate.success").hide(),$(n).parent().find(".validate.error").show(),$(n).parent().find(".validate.loading").hide(),$(n).parents("form").find(".btn-wrap .btn").attr("disabled","true"),$(n).parents("form").find(".promocode-message").show(),!1})}};$(".promo-info input").keyup(function(){ValidatePromoCodeLogic($(this))});$(".promo-info input").blur(function(){ValidatePromoCodeLogic($(this))});windowHeight=$(window).height();viewportWidth=$(window).width();$.fn.pVal=function(){var n=$(this),t=n.eq(0).val();return t==n.attr("placeholder")?"":t};$(window).load(function(){window.location.search.match("mngbooking")&&window.location.search.match("mngbooking").length>0?$("#mngBookingHomePage").trigger("click"):window.location.search.match("check-in")&&window.location.search.match("check-in").length>0&&$("#check-in-url").trigger("click")});$(document).ready(function(){function it(n,t,i){const r=new Date;r.setTime(r.getTime()+i*864e5);let u="expires="+r.toUTCString();document.cookie=n+"="+t+";"+u+";path=/"}function et(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i);u="expires="+r.toUTCString();document.cookie=n+"="+t+"; expires="+u}function o(n){var t=$(n).validate().checkForm();t?($(n).find(".form-btn-wrap").removeClass("hidden"),$(n).find(".btn-wrap .btn").removeAttr("disabled")):($(n).find(".form-btn-wrap").addClass("hidden"),$(n).find(".btn-wrap .btn").attr("disabled","true"))}function ot(n){var t;if(n=="#one-way"){if(u(localStorage.from_flight_search)||(t=localStorage.from_flight_search,$("#from_flight_search_oneway").focus().typeahead("val",localStorage.from_flight_search),$("#from_flight_search_oneway").siblings(".tt-menu").find(".Typeahead-selectable").filter("[data-code="+localStorage.from_flight_search+"]").click(),localStorage.from_flight_search=t),u(localStorage.to_flight_search)||setTimeout(function(){var n=localStorage.to_flight_search;viewportWidth<990&&$("#to_flight_search_oneway").focus().typeahead("val",n);$("#to_flight_search_oneway").siblings(".tt-menu").find(".Typeahead-selectable").filter("[data-code="+localStorage.to_flight_search+"]").click();$("#to_flight_search_oneway").blur();$("#to_flight_search_oneway").attr("data-selected",n);localStorage.to_flight_search=n},1e3),u($("#departure_flight_search").val())||setTimeout(function(){$("#departure_flight_search_oneway").val($("#departure_flight_search").val());$("#departure_flight_search_oneway").attr("data-value",$("#departure_flight_search").data("value"));$("#departure_flight_search_oneway").parents(".group-field-wrap").find(".range-picker-wrap").removeClass("active");$("#departure_flight_search_oneway").parents(".daterangepicker-single").removeClass("show-popup");$("#departure_flight_search_oneway").blur();l()},600),$("#oneWayAdult").val("1"),$("#oneWayChild").val("0"),$("#oneWayInfant").val("0"),$("#oneWayExtra").val("0"),!u($("#roundAdult").val())&&$("#roundAdult").val()!="1")for(i=1;i<$("#roundAdult").val();i++)$("#oneWayAdult_btn_up").click();if(!u($("#roundChild").val())&&$("#roundChild").val()!="0")for(i=0;i<$("#roundChild").val();i++)$("#oneWayChild_btn_up").click();if(!u($("#roundInfant").val())&&$("#roundInfant").val()!="0")for(i=0;i<$("#roundInfant").val();i++)$("#oneWayInfant_btn_up").click();if(!u($("#roundExtra").val())&&$("#roundExtra").val()!="0")for(i=0;i<$("#roundExtra").val();i++)$("#oneWayExtra_btn_up").click();u($("#flight_search_promo_code").val())||$("#flight_search_promo_code_oneway").val($("#flight_search_promo_code").val());$("#flexibleDatesRoundDeparture").is(":checked")?$("#flexibleDatesOneWayDeparture").prop("checked",!0):$("#flexibleDatesOneWayDeparture").prop("checked",!1)}if(n=="#return"){if(u(localStorage.from_flight_search)||(t=localStorage.from_flight_search,$("#from_flight_search").focus().typeahead("val",localStorage.from_flight_search),$("#from_flight_search").siblings(".tt-menu").find(".Typeahead-selectable").filter("[data-code="+localStorage.from_flight_search+"]").click(),localStorage.from_flight_search=t),u(localStorage.to_flight_search)||setTimeout(function(){var n=localStorage.to_flight_search;viewportWidth<990&&$("#to_flight_search").focus().typeahead("val",n);$("#to_flight_search").siblings(".tt-menu").find(".Typeahead-selectable").filter("[data-code="+localStorage.to_flight_search+"]").click();$("#to_flight_search").blur();$("#to_flight_search").attr("data-selected",n);localStorage.to_flight_search=n},750),u($("#departure_flight_search_oneway").val())||setTimeout(function(){$("#departure_flight_search").val($("#departure_flight_search_oneway").val());$("#departure_flight_search").attr("data-value",$("#departure_flight_search_oneway").data("value"));$("#departure_flight_search").parents(".group-field-wrap").find(".range-picker-wrap").removeClass("active");$("#departure_flight_search").parents(".daterangepicker-group").removeClass("show-popup");$("#departure_flight_search").blur();$("#return_flight_search").blur();l()},600),$("#roundAdult").val("1"),$("#roundChild").val("0"),$("#roundInfant").val("0"),$("#roundExtra").val("0"),!u($("#oneWayAdult").val())&&$("#oneWayAdult").val()!="1")for(i=1;i<$("#oneWayAdult").val();i++)$("#roundAdult_btn_up").click();if(!u($("#oneWayChild").val())&&$("#oneWayChild").val()!="0")for(i=0;i<$("#oneWayChild").val();i++)$("#roundChild_btn_up").click();if(!u($("#oneWayInfant").val())&&$("#oneWayInfant").val()!="0")for(i=0;i<$("#oneWayInfant").val();i++)$("#roundInfant_btn_up").click();if(!u($("#oneWayExtra").val())&&$("#oneWayExtra").val()!="0")for(i=0;i<$("#oneWayExtra").val();i++)$("#roundExtra_btn_up").click();u($("#flight_search_promo_code_oneway").val())||$("#flight_search_promo_code").val($("#flight_search_promo_code_oneway").val());$("#flexibleDatesOneWayDeparture").is(":checked")?$("#flexibleDatesRoundDeparture").prop("checked",!0):$("#flexibleDatesRoundDeparture").prop("checked",!1)}}function u(n){return n==null||n.length===0}function l(){$(".jazeera_backdrop").hasClass("active")&&$(".jazeera_backdrop").removeClass("active")}function st(){$(".month-wrapper").find("table .day.nextMonth, table .day.lastMonth").parent().addClass("invalid-date-td");$(".month-wrapper").find("table .first-date-selected.checked.lastMonth").parent().removeClass("first-date-selected-td");$(".month-wrapper").find("table .last-date-selected.checked.lastMonth").parent().removeClass("last-date-selected-td")}function h(i,r,u,f){var e,o,s;if(f){for(e="",o=1;o<8;o++)s=v[Math.floor(Math.random()*v.length)],e="",s.recommend&&(e+='<div class="hightlight bg-success">Lowest Fair<\/div>'),e+='<div class="date"><strong>'+moment(n[o-1],"DD-MM-YYYY").format("DD MMM")+",<\/strong> "+moment(n[o-1],"DD-MM-YYYY").format("ddd")+"<\/div>",e+=s.cost!=""?s.cost:'<div class="msg">No Flights <br>Available<\/div>',u=="initLoad"?o==4?t.push('<div class="date-tab-wrap selected"> '+e+" <\/div>"):s.cost!=""?t.push('<div class="date-tab-wrap"> '+e+" <\/div>"):t.push('<div class="date-tab-wrap inactive"> '+e+" <\/div>"):o==1?t.push('<div class="date-tab-wrap selected"> '+e+" <\/div>"):s.cost!=""?t.push('<div class="date-tab-wrap"> '+e+" <\/div>"):t.push('<div class="date-tab-wrap inactive"> '+e+" <\/div>");$(".dynamic-dates").empty().append(t);$(".flight-info-wrap.action .select-date-range.prev-date-range").empty().html('<div class="hidden-date">'+moment(i,"DD-MM-YYYY").subtract(1,"days").format("DD-MM-YYYY")+"<\/div> <strong>"+moment(i,"DD-MM-YYYY").subtract(7,"days").format("DD MMM")+"<\/strong> to <strong>"+moment(i,"DD-MM-YYYY").subtract(1,"days").format("DD MMM")+"<\/strong>");$(".flight-info-wrap.action .select-date-range.next-date-range").empty().html('<div class="hidden-date">'+moment(r,"DD-MM-YYYY").add(1,"days").format("DD-MM-YYYY")+"<\/div> <strong>"+moment(r,"DD-MM-YYYY").add(1,"days").format("DD MMM")+"<\/strong> to <strong>"+moment(r,"DD-MM-YYYY").add(7,"days").format("DD MMM")+"<\/strong>")}else{for(e="",o=1;o<4;o++)s=v[Math.floor(Math.random()*v.length)],e="",s.recommend&&(e+='<div class="hightlight bg-success">Lowest Fair<\/div>'),e+='<div class="date"><strong>'+moment(n[o-1],"DD-MM-YYYY").format("DD MMM")+",<\/strong> "+moment(n[o-1],"DD-MM-YYYY").format("ddd")+"<\/div>",e+=s.cost!=""?s.cost:'<div class="msg">No Flights <br>Available<\/div>',u=="initLoad"?o==2?t.push('<div class="date-tab-wrap selected"> '+e+" <\/div>"):s.cost!=""?t.push('<div class="date-tab-wrap"> '+e+" <\/div>"):t.push('<div class="date-tab-wrap inactive"> '+e+" <\/div>"):o==1?t.push('<div class="date-tab-wrap selected"> '+e+" <\/div>"):s.cost!=""?t.push('<div class="date-tab-wrap"> '+e+" <\/div>"):t.push('<div class="date-tab-wrap inactive"> '+e+" <\/div>");$(".dynamic-dates").empty().append(t);$(".flight-info-wrap.action .select-date-range.prev-date-range").empty().html('<div class="hidden-date">'+i+"<\/div>");$(".flight-info-wrap.action .select-date-range.next-date-range").empty().html('<div class="hidden-date">'+r+"<\/div>")}}function c(i,r,u){u?i==moment().format("DD-MM-YYYY")?(n=[],t=[],n.push(moment(i,"DD-MM-YYYY").subtract(3,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").subtract(2,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").subtract(1,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(0,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(1,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(2,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(3,"days").format("DD-MM-YYYY")),h(moment(i,"DD-MM-YYYY").subtract(3,"days").format("DD-MM-YYYY"),moment(i,"DD-MM-YYYY").add(3,"days").format("DD-MM-YYYY"),"initLoad",!0)):(r=="getNextWeek"&&(n=[],t=[],n.push(moment(i,"DD-MM-YYYY").add(0,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(1,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(2,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(3,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(4,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(5,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(6,"days").format("DD-MM-YYYY")),h(moment(i,"DD-MM-YYYY").add(0,"days").format("DD-MM-YYYY"),moment(i,"DD-MM-YYYY").add(6,"days").format("DD-MM-YYYY"),"nextLoad",!0)),r=="getLastWeek"&&(n=[],t=[],n.push(moment(i,"DD-MM-YYYY").subtract(6,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").subtract(5,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").subtract(4,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").subtract(3,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").subtract(2,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").subtract(1,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").subtract(0,"days").format("DD-MM-YYYY")),h(moment(i,"DD-MM-YYYY").subtract(6,"days").format("DD-MM-YYYY"),moment(i,"DD-MM-YYYY").subtract(0,"days").format("DD-MM-YYYY"),"prevLoad",!0))):i==moment().format("DD-MM-YYYY")?(n=[],t=[],n.push(moment(i,"DD-MM-YYYY").subtract(1,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(0,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(1,"days").format("DD-MM-YYYY")),h(moment(i,"DD-MM-YYYY").subtract(3,"days").format("DD-MM-YYYY"),moment(i,"DD-MM-YYYY").add(3,"days").format("DD-MM-YYYY"),"initLoad",!1)):(r=="getNextWeek"&&(n=[],t=[],n.push(moment(i,"DD-MM-YYYY").subtract(1,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(0,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(1,"days").format("DD-MM-YYYY")),h(moment(i,"DD-MM-YYYY").subtract(3,"days").format("DD-MM-YYYY"),moment(i,"DD-MM-YYYY").add(3,"days").format("DD-MM-YYYY"),"nextLoad",!1)),r=="getLastWeek"&&(n=[],t=[],n.push(moment(i,"DD-MM-YYYY").subtract(1,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(0,"days").format("DD-MM-YYYY")),n.push(moment(i,"DD-MM-YYYY").add(1,"days").format("DD-MM-YYYY")),h(moment(i,"DD-MM-YYYY").subtract(3,"days").format("DD-MM-YYYY"),moment(i,"DD-MM-YYYY").add(3,"days").format("DD-MM-YYYY"),"prevLoad",!1)))}var rt,ut,y,p,w,b,k,d,g,nt,tt,ft,a;localStorage.from_flight_search="";localStorage.to_flight_search="";localStorage.from_flight_searchmulticity1="";localStorage.to_flight_searchmulticity1="";localStorage.from_flight_searchmulticity2="";localStorage.to_flight_searchmulticity2="";localStorage.calender_available_dates="";$("body").append('<div class="jazeera_overlay" />');$("body").append('<div class="jazeera_backdrop" />');$(".form-wrap").each(function(){$(this).find(".form-field").last().addClass("last-field")});$("a[data-goto-href]").click(function(n){var t=$(this).attr("href");$("body").scrollTo(t,600);n.preventDefault()});$(".float-label-wrapper").FloatLabel();$(".custom-select").select2({minimumResultsForSearch:-1,allowClear:!1,placeholder:function(){$(this).data("placeholder")}}).on("select2:open",function(){$(".dropdown-toggle + .dropdown-menu").removeClass("show")});$("body.scroll-disabled").bind("touchmove",function(n){n.preventDefault()});$(".sub-panel-data .from").click(function(){$("html,body").animate({scrollTop:$(".panel-data-wrapper .active").offset().top},"slow")});var e=$("#calendar-departure"),f=$("#calendar-return"),r=new Date,s=new Date;rt=!1;$("#btnDarkToRegular").click(function(){var n=setCookieTimeOut;et("DarkSite","True",parseInt(n));rt=!0;location.reload()});e.fullCalendar({header:{left:"",center:"",right:""},prev:".left-single-arrow",next:".right-single-arrow",height:94,contentHeight:"auto",fixedWeekCount:!1,weekMode:"liquid",defaultView:"month",navLinks:!0,editable:!0,selectable:!0,selectHelper:!1,unselectAuto:!1,selectAllow:function(n){return moment().diff(n.start)<=0},navLinks:!1,themeSystem:"standard",inline:!0,select:function(n){r=new Date(n);var t=moment(r,"YYYY-MM-DD").add(0,"days");f.fullCalendar("gotoDate",t);$(".flexible-dates-picker.return .fc-month-view table td").each(function(){$(this).data("date")>=moment(r).format("YYYY-MM-DD")?$(this).removeClass("inactive"):$(this).addClass("inactive")});moment(r,"YYYY-MM-DD")<moment(s,"YYYY-MM-DD")&&$("#calendar-return .fc-day").removeClass("fc-cell-selected")},dayRender:function(n,t){var i=e.fullCalendar("getDate"),r=i.format("MMM");n.format("DD")==1||n.format("DD")==12?t.html('<div class="date-cell-wrap"><div class="hightlight bg-info">Recommended<\/div><div class="date">'+n.format("MMM DD")+'<\/div><div class="price">INR <strong>8,329.00<\/strong> <\/div> <\/div>'):t.html('<div class="date-cell-wrap"><div class="date">'+n.format("MMM DD")+'<\/div><div class="price">INR <strong>8,329.00<\/strong> <\/div> <\/div>')},dayClick:function(){$(this).parents(".flexible-dates-picker").find(".fc-cell-selected").removeClass("fc-cell-selected");$(this).addClass("fc-cell-selected")},viewRender:function(n){var i=n.intervalStart,t=i.format("YYYY-MM-DD"),r=moment(t).subtract(1,"months").format("DD MMM"),u=moment(t).subtract(1,"months").endOf("month").format("DD MMM"),f=moment(t).add(1,"months").format("DD MMM"),o=moment(t).add(1,"months").endOf("month").format("DD MMM");e.parents(".date-picker-wrap").find(".calender-switcher .calender-switch-btn.left .dates-btwn").empty().append("<strong>"+r+"<\/strong> to <strong>"+u+"<\/strong>");e.parents(".date-picker-wrap").find(".calender-switcher .calender-switch-btn.right .dates-btwn").empty().append("<strong>"+f+"<\/strong> to <strong>"+o+"<\/strong>")}});f.fullCalendar({header:{left:"",center:"",right:""},prev:".left-single-arrow",next:".right-single-arrow",height:94,contentHeight:"auto",fixedWeekCount:!1,weekMode:"liquid",defaultView:"month",navLinks:!0,editable:!0,selectable:!0,selectHelper:!1,unselectAuto:!1,selectAllow:function(n){return moment().diff(n.start)<=0},navLinks:!1,themeSystem:"standard",inline:!0,select:function(n){s=new Date(n)},dayRender:function(n,t){var i=f.fullCalendar("getDate"),r=i.format("MMM");n.format("DD")==1||n.format("DD")==12?t.html('<div class="date-cell-wrap"><div class="hightlight bg-info">Recommended<\/div><div class="date">'+n.format("MMM DD")+'<\/div><div class="price">INR <strong>8,329.00<\/strong> <\/div> <\/div>'):t.html('<div class="date-cell-wrap"><div class="date">'+n.format("MMM DD")+'<\/div><div class="price">INR <strong>8,329.00<\/strong> <\/div> <\/div>')},dayClick:function(){$(this).parents(".flexible-dates-picker").find(".fc-cell-selected").removeClass("fc-cell-selected");$(this).addClass("fc-cell-selected")},viewRender:function(n){var i=n.intervalStart,t=i.format("YYYY-MM-DD"),r=moment(t).subtract(1,"months").format("DD MMM"),u=moment(t).subtract(1,"months").endOf("month").format("DD MMM"),e=moment(t).add(1,"months").format("DD MMM"),o=moment(t).add(1,"months").endOf("month").format("DD MMM");f.parents(".date-picker-wrap").find(".calender-switcher .calender-switch-btn.left .dates-btwn").empty().append("<strong>"+r+"<\/strong> to <strong>"+u+"<\/strong>");f.parents(".date-picker-wrap").find(".calender-switcher .calender-switch-btn.right .dates-btwn").empty().append("<strong>"+e+"<\/strong> to <strong>"+o+"<\/strong>")}});$("#calendar-departure-prev").click(function(n){e.fullCalendar("prev");f.fullCalendar("prev");$("#calendar-departure .fc-day").removeClass("fc-cell-selected");$('#calendar-departure .fc-day[data-date="'+moment(r).format("YYYY-MM-DD")+'"]').addClass("fc-cell-selected");$("#calendar-return .fc-day").removeClass("fc-cell-selected");$('#calendar-return .fc-day[data-date="'+moment(s).format("YYYY-MM-DD")+'"]').addClass("fc-cell-selected");$('#calendar-return .fc-day[data-date="'+moment(r).format("YYYY-MM-DD")+'"]').parents(".fc-widget-content").prevAll().find("td").addClass("inactive");$('#calendar-return .fc-day[data-date="'+moment(r).format("YYYY-MM-DD")+'"]').prevAll().addClass("inactive");n.preventDefault()});$("#calendar-departure-next").click(function(n){e.fullCalendar("next");f.fullCalendar("next");$("#calendar-departure .fc-day").removeClass("fc-cell-selected");$('#calendar-departure .fc-day[data-date="'+moment(r).format("YYYY-MM-DD")+'"]').addClass("fc-cell-selected");$("#calendar-return .fc-day").removeClass("fc-cell-selected");$('#calendar-return .fc-day[data-date="'+moment(s).format("YYYY-MM-DD")+'"]').addClass("fc-cell-selected");$('#calendar-return .fc-day[data-date="'+moment(r).format("YYYY-MM-DD")+'"]').parents(".fc-widget-content").prevAll().find("td").addClass("inactive");$('#calendar-return .fc-day[data-date="'+moment(r).format("YYYY-MM-DD")+'"]').prevAll().addClass("inactive");n.preventDefault()});$("#calendar-return-prev").click(function(n){e.fullCalendar("prev");f.fullCalendar("prev");$("#calendar-departure .fc-day").removeClass("fc-cell-selected");$('#calendar-departure .fc-day[data-date="'+moment(r).format("YYYY-MM-DD")+'"]').addClass("fc-cell-selected");$("#calendar-return .fc-day").removeClass("fc-cell-selected");$('#calendar-return .fc-day[data-date="'+moment(s).format("YYYY-MM-DD")+'"]').addClass("fc-cell-selected");$('#calendar-return .fc-day[data-date="'+moment(r).format("YYYY-MM-DD")+'"]').parents(".fc-widget-content").prevAll().find("td").addClass("inactive");$('#calendar-return .fc-day[data-date="'+moment(r).format("YYYY-MM-DD")+'"]').prevAll().addClass("inactive");n.preventDefault()});$("#calendar-return-next").click(function(n){e.fullCalendar("next");f.fullCalendar("next");$("#calendar-departure .fc-day").removeClass("fc-cell-selected");$('#calendar-departure .fc-day[data-date="'+moment(r).format("YYYY-MM-DD")+'"]').addClass("fc-cell-selected");$("#calendar-return .fc-day").removeClass("fc-cell-selected");$('#calendar-return .fc-day[data-date="'+moment(s).format("YYYY-MM-DD")+'"]').addClass("fc-cell-selected");$('#calendar-return .fc-day[data-date="'+moment(r).format("YYYY-MM-DD")+'"]').parents(".fc-widget-content").prevAll().find("td").addClass("inactive");$('#calendar-return .fc-day[data-date="'+moment(r).format("YYYY-MM-DD")+'"]').prevAll().addClass("inactive");n.preventDefault()});$(".flexible-dates-picker.return .fc-month-view table td").on("click",function(n){n.preventDefault()});$.validator.addMethod("checkValidFormat",function(n){var t=new RegExp("(0[123456789]|10|11|12|13|14|15|16|17|18|19|20|21|22|23|24|25|26|27|28|29|30|31)([/])(0[123456789]|10|11|12)([/])([1-2][0-9][0-9][0-9])");return t.test(n)?!0:!1},"Please enter valid date.");$.validator.addMethod("noSpace",function(n){return n.indexOf(" ")<0&&n!=""},"The format doesn't seem right");$.validator.addMethod("passengerCountRoundWay",function(){return parseInt($("#roundAdult").val())==parseInt($("#roundInfant").val())?($("#roundInfant_btn_up").prop("disabled",!0),!0):(parseInt($("#roundAdult").val())>parseInt($("#roundInfant").val())?$("#roundInfant_btn_up").prop("disabled",!1):$("#roundInfant_btn_up").prop("disabled",!0),parseInt($("#roundAdult").val())>parseInt($("#roundInfant").val()))},"Invalid passenger entry adults should be more than infants.");$.validator.addMethod("passengerCountOneWay",function(){return parseInt($("#oneWayAdult").val())==parseInt($("#oneWayInfant").val())?($("#oneWayInfant_btn_up").prop("disabled",!0),!0):(parseInt($("#oneWayAdult").val())>parseInt($("#oneWayInfant").val())?$("#oneWayInfant_btn_up").prop("disabled",!1):$("#oneWayInfant_btn_up").prop("disabled",!0),parseInt($("#oneWayAdult").val())>parseInt($("#oneWayInfant").val()))},"Invalid passenger entry adults should be more than infants.");$.validator.addMethod("passengerCountMultiWay",function(){return parseInt($("#multiWayAdult").val())==parseInt($("#multiWayInfant").val())?($("#multiWayInfant_btn_up").prop("disabled",!0),!0):(parseInt($("#multiWayAdult").val())>parseInt($("#multiWayInfant").val())?$("#multiWayInfant_btn_up").prop("disabled",!1):$("#multiWayInfant_btn_up").prop("disabled",!0),parseInt($("#multiWayAdult").val())>parseInt($("#multiWayInfant").val()))},"Invalid passenger entry adults should be more than infants.");$.validator.addMethod("passengerTotCountMultiway",function(){return parseInt($("#multiWayAdult").val())+parseInt($("#multiWayChild").val())+parseInt($("#multiWayExtra").val())==9?$("#multiWayAdult_btn_up,#multiWayChildren_btn_up,#multiWayExtra_btn_up").prop("disabled",!0):$("#multiWayAdult_btn_up,#multiWayChildren_btn_up,#multiWayExtra_btn_up").prop("disabled",!1),parseInt($("#multiWayAdult").val())+parseInt($("#multiWayChild").val())+parseInt($("#multiWayExtra").val())<=9},"Adults and childrens count should be less than 9");$.validator.addMethod("passengerTotCountOneWay",function(){return parseInt($("#oneWayAdult").val())+parseInt($("#oneWayChild").val())+parseInt($("#oneWayExtra").val())==9?$("#oneWayAdult_btn_up,#oneWayChild_btn_up,#oneWayExtra_btn_up").prop("disabled",!0):$("#oneWayAdult_btn_up,#oneWayChild_btn_up,#oneWayExtra_btn_up").prop("disabled",!1),parseInt($("#oneWayAdult").val())+parseInt($("#oneWayChild").val())+parseInt($("#oneWayExtra").val())<=9},"Adults and childrens count should be less than 9");$.validator.addMethod("passengerTotCountReturn",function(){return parseInt($("#roundAdult").val())+parseInt($("#roundChild").val())+parseInt($("#roundExtra").val())==9?$("#roundAdult_btn_up,#roundChild_btn_up,#roundExtra_btn_up").prop("disabled",!0):$("#roundAdult_btn_up,#roundChild_btn_up,#roundExtra_btn_up").prop("disabled",!1),parseInt($("#roundAdult").val())+parseInt($("#roundChild").val())+parseInt($("#roundExtra").val())<=9},"Adults and childrens count should be less than 9");$.validator.addMethod("emailValidate",function(n,t){var i,r;return n.indexOf("@")!=-1?(i=!1,r=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/.test(n),r&&(i=!0)):i=!0,this.optional(t)||i},"Please enter valid email address.");ut={errorElement:"span",errorClass:"help-block",focusInvalid:!0,onblur:!0,highlight:function(n){var i=$(n),t=i.closest(".form-field");t.length&&(t.addClass("has-error"),t.removeClass("populated"))},unhighlight:function(n){var i=$(n),t=i.closest(".form-field");t.length&&(t.removeClass("has-error"),t.addClass("populated"))},errorPlacement:function(n,t){var i=$(t);i.parent(".form-field").length&&i.parent(".form-field").prepend(n)}};$.validator.setDefaults(ut);y=$("#manageBookingForm");y.validate({rules:{pnr_manage_boking:{required:!0,minlength:2,maxlength:25},email_manage_booking:{required:!0,emailValidate:!0}},messages:{pnr_manage_boking:{required:Js_PNRNumber},email_manage_booking:{required:Js_EmailOrLastName}},submitHandler:function(){var i=$("#pnr_manage_boking").val(),n=$("#email_manage_booking").val(),f=basePortalUrlWithoutSearchFlight+"/manage-booking?pnr="+i+"&lastname="+n+"&Flowtype=ModifyBooking",t,r,u;settings.token&&0!==settings.token||(t=new XMLHttpRequest,t.open("POST",settings.middleWareUrl+"/api/nsk/v1/token",!1),t.setRequestHeader("Content-type","application/json"),t.send(),r=JSON.parse(t.responseText),settings.token=r.data.token);u={};u=n.indexOf("@")!==-1?{Recordlocator:i,Emailaddress:n,FlowType:"ModifyBooking"}:{Recordlocator:i,LastName:n,FlowType:"ModifyBooking"};try{$.ajax({url:apiURL+"/api/jz/v1/BookingCheckForRestriction?Recordlocator="+i+"&LastName="+n+"&retriveBookingFlowType=ModifyBooking",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token},type:"GET",success:function(){$("#Invalid_pnr_email_manage_booking").hide();window.location.assign(f)},error:function(n,t){$("#Invalid_pnr_email_manage_booking").show();console.error("Error:",t)}})}catch(e){Console.error("An error occurred:",erorr)}}});y.on("blur keyup change","input",function(){o("#manageBookingForm")});p=$("#searchcheckInForm");p.validate({rules:{pnr_checkin:{required:!0,minlength:2,maxlength:25},email_checkin:{required:!0,emailValidate:!0}},messages:{pnr_manage_boking:{required:Js_PNRNumber},email_manage_booking:{required:Js_EmailOrLastName}},submitHandler:function(){var t=$("#pnr_checkin").val(),n=$("#email_checkin").val(),r=basePortalURL+"?pnr="+t+"&lastname="+n+"&Flowtype=CheckIn",i;try{$.ajax({type:"POST","async":!1,url:settings.middleWareDomainUrl+"api/jz/v1/Token?Type=Checkin",data:"{}",headers:{Accept:"application/json","Content-Type":"application/json"},success:function(n,t,i){var r=JSON.parse(i.responseText);settings.token=r.data.token},error:function(n,t,i){console.error("AJAX error:",i)}});i={};i=n.indexOf("@")!==-1?{Recordlocator:t,Emailaddress:n,FlowType:"CheckIn"}:{Recordlocator:t,LastName:n,FlowType:"CheckIn"}}catch(error){console.error("An error occurred:",error)}try{$.ajax({url:apiURL+"/api/jz/v1/BookingCheckForRestriction?RecordLocator&Recordlocator="+t+"&LastName="+n+"&FlowType=CheckIn",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token},type:"GET",success:function(){$("#Invalid_pnr_email_checkIn_booking").hide();window.location.assign(r)},error:function(){$("#Invalid_pnr_email_checkIn_booking").show()}})}catch{console.error("An error occurred:",error)}}});p.on("blur keyup change","input",function(){o("#searchcheckInForm")});w=$("#searchReturnFlight");w.validate({rules:{from_flight_search:{required:!0},to_flight_search:{required:!0},departure_flight_search:{required:!0},return_flight_search:{required:!0},passengers_flight_search:{required:!0,passengerTotCountReturn:!0,passengerCountRoundWay:!0}},messages:{from_flight_search:{required:Js_FromLocation},to_flight_search:{required:Js_DestinationFlight},departure_flight_search:{required:Js_DepartureDate},return_flight_search:{required:Js_ReturnDate},passengers_flight_search:{required:Js_PassengersDetails}},submitHandler:function(){setTimeout(()=>{var s,u;let f=!1;var k=JSON.parse(sessionStorage.getItem("saveersList")),d=$("#departure_flight_search").data("value"),t={adult:$("#roundAdult").val(),children:$("#roundChild").val(),infant:$("#roundInfant").val()},e=k;let n={adult:0,children:0,infant:0},g=Number(t.adult)+Number(t.children);if(e?.actingRole=="WWWC"&&(g>e?.beneficiaries?.length?f=!0:(e.beneficiaries.forEach(function(t){var r=new Date(d),u=new Date(t.dateOfBirth),f=Math.abs(r.getTime()-u.getTime()),i=Math.floor(f/(864e5*365.25));i<2?++n.infant:i>=2&&i<12?++n.children:++n.adult}),t.adult<=n.adult&&t.children<=n.children||(f=!0))),f)return showPopup(),$("#showPopupButton").css("display","block"),!1;s=$("html").attr("lang");parseInt($("#roundExtra").val())>=1&&$("#flight_search_promo_code").val("PEXST");var nt=!0,tt=$("#flexibleDatesRoundDeparture").is(":checked"),st=$("#flexibleDatesRoundReturn").val(),rt="RoundTrip",i=$("#from_flight_search").attr("data-selected"),r=$("#to_flight_search").attr("data-selected"),o=$("#departure_flight_search").data("value");localStorage.departure_flight_date=$("#departure_flight_search").data("value");u=$("#return_flight_search").data("value");localStorage.return_flight_date=$("#return_flight_search").data("value");var h=$("#roundAdult").val(),c=$("#roundChild").val(),l=$("#roundInfant").val(),ut=$("#roundExtra").val(),a=$("#flight_search_promo_code").val().toUpperCase(),v=moment(o).format("DD"),y=moment(o).format("YYYY-MM"),p=moment(u).format("DD"),w=moment(u).format("YYYY-MM"),ft=$("#PaxTypes_return").find(":selected").val(),et=parseInt(document.getElementById("searchButtoncdp").getAttribute("data-cdp"))||0,ht=et>=1?"autopopulatedsearch":null,b=!1,ot=JSON.stringify({Origin:i,Destination:r,DepDate:o,ArrDate:u});it("Recentsearch",ot,1);$.ajax({url:settings.middleWareDomainUrl+"/api/jz/v1/external/travelsearchengine/stationmarkets","async":!0,method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token},success:function(n){var u=n.data.stations.values,t;b=!!u.find(n=>n.code==i||n.code==r);b?$.ajax({url:settings.middleWareDomainUrl+"/api/jz/v1/external/travelsearchengine/constructDeeplink?searchEngineType=dohop",method:"POST","async":!0,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token},data:JSON.stringify({origin:i,destination:r,depatureDate:y+"-"+v,returnDate:w+"-"+p,adultCount:h,childCount:c||0,infantCount:l||0,promoCode:a||"",language:s||"en"}),success:function(n){return window.location.href=n.data.res.url}}):(t=basePortalURL+"?culture="+cultureData+"&querystring="+nt+"&RadioButtonMarketStructure="+rt+"&Origin1="+i+"&Destination1="+r+"&Day1="+v+"&MonthYear1="+y+"&Day2="+p+"&MonthYear2="+w+"&ADT="+h+"&INFANT="+l+"&CHD="+c+"&promoCode="+a+"&isflexible="+tt+"&EXTRASEAT="+ut+"&PAXDIS="+ft,window.location.assign(t))}})},1e3)}});w.on("blur keyup change","input",function(){o("#searchReturnFlight");ValidatePromoCodeLogic($("#flight_search_promo_code"))});b=$("#searchOneWayFlight");b.validate({rules:{from_flight_search_oneway:{required:!0},to_flight_search_oneway:{required:!0},departure_flight_search_oneway:{required:!0},passengers_flight_search_oneway:{required:!0,passengerTotCountOneWay:!0,passengerCountOneWay:!0}},messages:{from_flight_search_oneway:{required:Js_FromLocation},to_flight_search_oneway:{required:Js_DestinationFlight},departure_flight_search_oneway:{required:Js_DepartureDate},passengers_flight_search_oneway:{required:Js_PassengersDetails}},submitHandler:function(){setTimeout(()=>{let u=!1;var p=JSON.parse(sessionStorage.getItem("saveersList")),w=$("#departure_flight_search_oneway").data("value"),t={adult:$("#oneWayAdult").val(),children:$("#oneWayChild").val(),infant:$("#oneWayInfant").val()},f=p;let n={adult:0,children:0,infant:0},b=Number(t.adult)+Number(t.children);if(f?.actingRole=="WWWC"&&(b>f?.beneficiaries?.length?u=!0:(f.beneficiaries.forEach(function(t){var r=new Date(w),u=new Date(t.dateOfBirth),f=Math.abs(r.getTime()-u.getTime()),i=Math.floor(f/(864e5*365.25));i<2?++n.infant:i>=2&&i<12?++n.children:++n.adult}),t.adult<=n.adult&&t.children<=n.children||(u=!0))),u)return showPopup(),!1;parseInt($("#oneWayExtra").val())>=1&&$("#flight_search_promo_code_oneway").val("PEXST");var k=$("html").attr("lang"),d=!0,g=$("#flexibleDatesOneWayDeparture").is(":checked"),nt="OneWay",i=$("#from_flight_search_oneway").attr("data-selected"),r=$("#to_flight_search_oneway").attr("data-selected"),e=$("#departure_flight_search_oneway").data("value");localStorage.departure_flight_date=$("#departure_flight_search_oneway").data("value");var o=$("#oneWayAdult").val(),s=$("#oneWayChild").val(),h=$("#oneWayInfant").val(),tt=$("#oneWayExtra").val(),c=$("#flight_search_promo_code_oneway").val().toUpperCase(),l=moment(e).format("DD"),a=moment(e).format("YYYY-MM"),rt=$("#PaxTypes_oneway").find(":selected").val(),ut=parseInt(document.getElementById("searchButtoncdp").getAttribute("data-cdp"))||0,v=ut>=1?"autopopulatedsearch":null,y=!1,ft=JSON.stringify({Origin:i,Destination:r,DepDate:e,ArrDate:""});it("Recentsearch",ft,1);$.ajax({url:settings.middleWareDomainUrl+"/api/jz/v1/external/travelsearchengine/stationmarkets","async":!0,method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token},success:function(n){var u=n.data.stations.values,t;y=!!u.find(n=>n.code==i||n.code==r);y?$.ajax({url:settings.middleWareDomainUrl+"/api/jz/v1/external/travelsearchengine/constructDeeplink?searchEngineType=dohop",method:"POST","async":!0,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:settings.token},data:JSON.stringify({origin:i,destination:r,depatureDate:a+"-"+l,returnDate:"",adultCount:o,childCount:s||0,infantCount:h||0,promoCode:c||"",language:k||"en"}),success:function(n){return window.location.href=n.data.res.url}}):(t=basePortalURL+"?culture="+cultureData+"&querystring="+d+"&RadioButtonMarketStructure="+nt+"&Origin1="+i+"&Destination1="+r+"&Day1="+l+"&MonthYear1="+a+"&ADT="+o+"&INFANT="+h+"&CHD="+s+"&promoCode="+c+"&isflexible="+g+"&EXTRASEAT="+tt+"&PAXDIS="+rt,t=v?t+"&cdp="+v:t,window.location.assign(t))}})},1e3)}});b.on("blur keyup change","input",function(){o("#searchOneWayFlight");ValidatePromoCodeLogic($("#flight_search_promo_code_oneway"))});k=$("#searchFlightStatus");k.validate({rules:{from_flight_search_flightstatus:{required:!0},to_flight_search_flightstatus:{required:!0},departure_flight_search_flightstatus:{required:!0},passengers_flight_search_flightstatus:{required:!0}},messages:{from_flight_search_flightstatus:{required:Js_FromLocation},to_flight_search_flightstatus:{required:Js_DestinationFlight},departure_flight_search_flightstatus:{required:Js_DepartureDate},passengers_flight_search_flightstatus:{required:Js_PassengersDetails}},submitHandler:function(){var e=$("#search_home_flight_button").attr("value"),u;if(e=="homepage"){const n=$("#from_flight_search_flightstatus").val(),t=$("#to_flight_search_flightstatus").val(),i=$("#from_flight_search_flightstatus").attr("data-selected"),r=$("#to_flight_search_flightstatus").attr("data-selected"),f=$("#departure_flight_search_flightstatus").val();if(n!=""&&t!=""&&i!=""&&r!=""&&f!=""){$("#flightStatus .float-label-wrapper").removeClass("has-error");sessionStorage.setItem("from_flight",n);sessionStorage.setItem("to_flight",t);sessionStorage.setItem("fromdatavalue_flight",i);sessionStorage.setItem("todatavalue_flight",r);sessionStorage.setItem("departure_flight",f);sessionStorage.setItem("Flightstatus","true");u=window.location.origin;const e=`${u}/${cultureData}/${"book-manage/flight-status"}`;window.location.href=e}}else{$(".loader_impliment.MainLoader").show();$("#flightStatusResultContainer").hide();var s=$("#flexibleDatesFlightStatuDeparture").is(":checked"),t=$("#from_flight_search_flightstatus").attr("data-selected"),i=$("#to_flight_search_flightstatus").attr("data-selected"),f=$("#departure_flight_search_flightstatus").val(),r=moment(f).format("YYYY-MM-DD"),o=moment(f).add(1,"days").format("YYYY-MM-DD"),h=n+"/getflightstatus/"+t+"/"+i+"/"+r,n=$("#flightscheduleDomainCulture").text();n.indexOf("http://")!=-1&&(n=n.replace("http://","https://"));$(".xtable #addeddata").remove();$.ajax({url:""+n+"/Umbraco/Surface/FlightSchedule/GetFlightStatus/?origin="+t+"&destination="+i+"&departuredate="+r,data:{DepartureStation:t,ArrivalStation:i,BeginDate:r,EndDate:o},cache:!1,type:"GET",success:function(n){$(".loader_impliment.MainLoader").hide();$("#flightStatusResultContainer").show();$(".jazeera_backdrop").removeClass("active");$(".tab-panel").removeClass("active");$("#flight_status_results_inner").detach();$("#flightStatusResultContainer").html(n);sessionStorage.removeItem("to_flight");sessionStorage.removeItem("to_flight");sessionStorage.removeItem("fromdatavalue_flight");sessionStorage.removeItem("todatavalue_flight");sessionStorage.removeItem("departure_flight");sessionStorage.removeItem("Flightstatus")}})}}});k.on("blur keyup change","input",function(){o("#searchFlightStatus")});d=$("#searchflightschedule");d.validate({rules:{from_flight_search_flightschedule:{required:!0},to_flight_search_flightschedule:{required:!0},departure_flight_search_flightschedule:{required:!0},passengers_flight_search_flightschedule:{required:!0}},messages:{from_flight_search_flightschedule:{required:Js_FromLocation},to_flight_search_flightschedule:{required:Js_DestinationFlight},departure_flight_search_flightschedule:{required:Js_DepartureDate},passengers_flight_search_flightschedule:{required:Js_PassengersDetails}},submitHandler:function(){$(".loader_impliment.MainLoader").show();$("#flightStatusResultContainerNew").hide();var f=$("#flexibleDatesFlightStatuDeparture").is(":checked"),t=$("#from_flight_search_flightschedule").attr("data-selected"),i=$("#to_flight_search_flightschedule").attr("data-selected"),u=$("#departure_flight_search_flightschedule").val(),r=moment(u).format("YYYY-MM-DD"),n=$("#flightscheduleDomainCulture").text();n.indexOf("http://")!=-1&&(n=n.replace("http://","https://"));$(".xtable #addeddata").remove();$.ajax({url:""+n+"/Umbraco/Surface/FlightSchedule/GetFlightSchedules/?origin="+t+"&destination="+i+"&departuredate="+r,data:{origin:t,destination:i,departureDate:r},cache:!1,type:"GET",success:function(n){$(".loader_impliment.MainLoader").hide();$(".jazeera_backdrop").removeClass("active");$(".tab-panel").removeClass("active");$("#flight_schedule_results_inner").detach();$("#flightStatusResultContainerNew").html(n);$("#flightStatusResultContainerNew").show()}})}});d.on("blur keyup change","input",function(){o("#searchflightschedule")});g=$("#searchMultiCityFlight");g.validate({rules:{from_flight_search_muticity1:{required:!0},to_flight_search_muticity1:{required:!0},departure_flight_search_muticity1:{required:!0},from_flight_search_muticity2:{required:!0},to_flight_search_muticity2:{required:!0},departure_flight_search_muticity2:{required:!0},from_flight_search_muticity3:{},to_flight_search_muticity3:{},departure_flight_search_muticity3:{},from_flight_search_muticity4:{},to_flight_search_muticity4:{},departure_flight_search_muticity4:{},from_flight_search_muticity5:{},to_flight_search_muticity5:{},departure_flight_search_muticity5:{},from_flight_search_muticity6:{},to_flight_search_muticity6:{},departure_flight_search_muticity6:{},from_flight_search_muticity7:{},to_flight_search_muticity7:{},departure_flight_search_muticity7:{},from_flight_search_muticity8:{},to_flight_search_muticity8:{},departure_flight_search_muticity8:{},from_flight_search_muticity9:{},to_flight_search_muticity9:{},departure_flight_search_muticity9:{},from_flight_search_muticity10:{},to_flight_search_muticity10:{},departure_flight_search_muticity10:{},passengers_flight_search_multi_city:{required:!0,passengerTotCountMultiway:!0,passengerCountMultiWay:!0}},messages:{from_flight_search_muticity1:{required:Js_FromLocation},to_flight_search_muticity1:{required:Js_DestinationFlight},departure_flight_search_muticity1:{required:Js_DepartureDate},from_flight_search_muticity2:{required:Js_FromLocation},to_flight_search_muticity2:{required:Js_DestinationFlight},departure_flight_search_muticity2:{required:Js_DepartureDate}},submitHandler:function(){setTimeout(()=>{var h,c,l,a,v,y,p,w,bi,i;let f=!1;var ki=JSON.parse(sessionStorage.getItem("saveersList")),di=$("#departure_flight_search_muticity1").data("value"),r={adult:$("#multiWayAdult").val(),children:$("#multiWayChild").val(),infant:$("#multiWayInfant").val()},e=ki;let t={adult:0,children:0,infant:0},gi=Number(r.adult)+Number(r.children);if(e?.actingRole=="WWWC"&&(gi>e?.beneficiaries?.length?f=!0:(e.beneficiaries.forEach(function(n){var r=new Date(di),u=new Date(n.dateOfBirth),f=Math.abs(r.getTime()-u.getTime()),i=Math.floor(f/(864e5*365.25));i<2?++t.infant:i>=2&&i<12?++t.children:++t.adult}),r.adult<=t.adult&&r.children<=t.children||(f=!0))),f)return showPopup(),!1;parseInt($("#multiWayExtra").val())>=1&&$("#flight_search_muticity_promo_code").val("PEXST");var nr=$("#flexibleDatesMultiCityDeparture1").is(":checked"),tr=$("#flexibleDatesMultiCityDeparture2").is(":checked"),ir=$("#flexibleDatesMultiCityDeparture3").is(":checked"),rr=$("#flexibleDatesMultiCityDeparture4").is(":checked"),ur=$("#flexibleDatesMultiCityDeparture5").is(":checked"),fr=$("#flexibleDatesMultiCityDeparture6").is(":checked"),b=$("#flexibleDatesMultiCityDeparture7").is(":checked"),k=$("#flexibleDatesMultiCityDeparture8").is(":checked"),d=$("#flexibleDatesMultiCityDeparture9").is(":checked"),g=$("#flexibleDatesMultiCityDeparture10").is(":checked"),er=$("#from_flight_search_muticity1").attr("data-selected"),u=$("#from_flight_search_muticity2").attr("data-selected"),nt=$("#from_flight_search_muticity3").attr("data-selected"),tt=$("#from_flight_search_muticity4").attr("data-selected"),it=$("#from_flight_search_muticity5").attr("data-selected"),rt=$("#from_flight_search_muticity6").attr("data-selected"),ut=$("#from_flight_search_muticity7").attr("data-selected"),ft=$("#from_flight_search_muticity8").attr("data-selected"),et=$("#from_flight_search_muticity9").attr("data-selected"),ot=$("#from_flight_search_muticity10").attr("data-selected"),st=$("#to_flight_search_muticity1").attr("data-selected"),o=$("#to_flight_search_muticity2").attr("data-selected"),ht=$("#to_flight_search_muticity3").attr("data-selected"),ct=$("#to_flight_search_muticity4").attr("data-selected"),lt=$("#to_flight_search_muticity5").attr("data-selected"),at=$("#to_flight_search_muticity6").attr("data-selected"),vt=$("#to_flight_search_muticity7").attr("data-selected"),yt=$("#to_flight_search_muticity8").attr("data-selected"),pt=$("#to_flight_search_muticity9").attr("data-selected"),wt=$("#to_flight_search_muticity10").attr("data-selected"),bt=$("#departure_flight_search_muticity1").data("value"),kt=$("#departure_flight_search_muticity2").data("value"),dt=$("#departure_flight_search_muticity3").data("value"),gt=$("#departure_flight_search_muticity4").data("value"),ni=$("#departure_flight_search_muticity5").data("value"),ti=$("#departure_flight_search_muticity6").data("value"),ii=$("#departure_flight_search_muticity7").data("value"),ri=$("#departure_flight_search_muticity8").data("value"),ui=$("#departure_flight_search_muticity9").data("value"),fi=$("#departure_flight_search_muticity10").data("value"),or=$("#multiWayAdult").val(),sr=$("#multiWayChild").val(),hr=$("#multiWayInfant").val(),cr=$("#multiWayExtra").val(),lr=moment(bt).format("D"),ar=moment(bt).format("YYYY-M"),ei=moment(kt).format("D"),s=moment(kt).format("YYYY-M"),n=moment(dt).format("D"),oi=moment(dt).format("YYYY-M"),pr=moment(gt).format("D"),si=moment(gt).format("YYYY-M"),wr=moment(ni).format("D"),hi=moment(ni).format("YYYY-M"),br=moment(ti).format("D"),ci=moment(ti).format("YYYY-M"),kr=moment(ii).format("D"),li=moment(ii).format("YYYY-M"),dr=moment(ri).format("D"),ai=moment(ri).format("YYYY-M"),gr=moment(ui).format("D"),vi=moment(ui).format("YYYY-M"),nu=moment(fi).format("D"),yi=moment(fi).format("YYYY-M"),vr=$("#PaxTypes_multi").find(":selected").val(),yr=parseInt(document.getElementById("searchButtoncdp").getAttribute("data-cdp"))||0,pi=yr>=1?"autopopulatedsearch":null,wi="";tr&&u&&o&&s&&(wi="&Origin2="+u+"&Destination2="+o+"&Day2="+ei+"&MonthYear2="+s);h="";ir&&nt&&ht&&oi&&(h="&Origin3="+nt+"&Destination3="+ht+"&Day3="+n+"&MonthYear3="+oi);c="";rr&&tt&&ct&&si&&(c="&Origin4="+tt+"&Destination4="+ct+"&Day4="+n+"&MonthYear4="+si);l="";ur&&it&&lt&&hi&&(l="&Origin5="+it+"&Destination5="+lt+"&Day5="+n+"&MonthYear5="+hi);a="";fr&&rt&&at&&ci&&(a="&Origin6="+rt+"&Destination6="+at+"&Day6="+n+"&MonthYear6="+ci);v="";b&&ut&&vt&&li&&(v="&isflexible="+b+"&Origin7="+ut+"&Destination7="+vt+"&Day7="+n+"&MonthYear7="+li);y="";k&&ft&&yt&&ai&&(y="&isflexible="+k+"&Origin8="+ft+"&Destination8="+yt+"&Day8="+n+"&MonthYear8="+ai);p="";d&&et&&pt&&vi&&(p="&isflexible="+d+"&Origin9="+et+"&Destination9="+pt+"&Day9="+n+"&MonthYear9="+vi);w="";g&&ot&&wt&&yi&&(w="&isflexible="+g+"&Origin10="+ot+"&Destination10="+wt+"&Day10="+n+"&MonthYear10="+yi);bi=$("#flight_search_muticity_promo_code").val().toUpperCase();i=basePortalURL+"?culture="+cultureData+"&querystring=true&RadioButtonMarketStructure=MultiCity&Origin1="+er+"&Destination1="+st+"&Day1="+lr+"&MonthYear1="+ar+"&isflexible="+nr+wi+h+c+l+a+v+y+p+w+"&ADT="+or+"&INFANT="+hr+"&CHD="+sr+"&promoCode="+bi+"&Origin2="+u+"&Destination2="+o+"&Day2="+ei+"&MonthYear2="+s+"&EXTRASEAT="+cr+"&PAXDIS="+vr;i=pi?i+"&cdp="+pi:i;$("#from_flight_search_muticity1").val().split(",")[1]!=$("#to_flight_search_muticity2").val().split(",")[1]&&st==u?$(".sameOrigin-message").modal("show"):window.location.assign(i)},1e3)}});g.on("blur keyup change","input",function(){o("#searchMultiCityFlight");ValidatePromoCodeLogic($("#flight_search_muticity_promo_code"))});$(".scroll-panel").mCustomScrollbar({axis:"y",theme:"minimal",autoHideScrollbar:!1});$(".login-switcher-btns .radio-wrap").click(function(){$(".login-form-wrap div").removeClass("active");var n=$(this).find("input").attr("id");$('.login-form-wrap div[data-form="'+n+'"]').addClass("active")});$("a[data-switch]").click(function(n){var t=$(this).attr("href");$(this).parent().find("a[data-switch]").removeClass("active");$(this).addClass("active");$(this).parent().siblings("[data-panel]").removeClass("active");$(this).parent().siblings("[data-panel][id$="+t.split("#")[1]+"]").addClass("active");$(".tt-menu .tt-dataset").find(".tt-suggestion").show();$(".tab-panel .form-field").removeClass("populated");$(".tab-panel input").removeAttr("data-selected");$(".daterangepicker-group").removeClass("show-popup");n.preventDefault()});$(".btn-switch").click(function(){var n=$(this).attr("href");$(".daterangepicker-group").removeClass("show-popup");(n=="#manage-booking"||n=="#check-in"||n=="#hotels"||n=="#one-way"||n=="#multi-city"||n=="#cars"||n=="#flight-status")&&l();ot(n)});window.location.href.indexOf("#manage-booking")>-1&&($("#mngBookingHomePage").click(),$("html, body").animate({scrollTop:$("#mngBookingHomePage").offset().top},"slow"));window.location.href.indexOf("#check-in")>-1&&($("#check-in-url").click(),$("html, body").animate({scrollTop:$("#check-in-url").offset().top},"slow"));window.location.href.indexOf("#flights")>-1&&($("#flights-in-url").click(),$("html, body").animate({scrollTop:$("#flights-in-url").offset().top},"slow"));window.location.href.indexOf("#flight-status")>-1&&($("#flightsstatus-in-url").click(),$("html, body").animate({scrollTop:$("#flightsstatus-in-url").offset().top},"slow"));$(".new-booking").click(function(){window.location.assign(window.location.origin+"/partners#flights")});$(".clsnew-booking").click(function(){$("html, body").animate({scrollTop:$("#flights-in-url").offset().top},30)});$("#from_flight_search_flightstatus").click(function(){var n=$("#search_home_flight_button").attr("value");n=="homepage"?(event.preventDefault(),$("html, body").stop(),$("html, body").animate({scrollTop:$("#flightsstatus-in-url").offset().top},"slow")):$("html, body").animate({scrollTop:$("#flightsstatus-in-url").offset().top},"slow")});$(".jazeera_backdrop").click(function(){$(this).removeClass("active");$(".tab-panel").removeClass("active")});$(".collapsing-panel .panel-head h6").prepend('<i class="icomoon icon-toggle"><\/i> ');$(".collapsing-panel .panel-head").click(function(n){$(".panel-details").slideUp();$(this).next(".panel-details").slideDown();n.preventDefault()});$("a[data-collapse]").click(function(n){$(this).siblings("[data-collapse]").removeClass("active");$(this).toggleClass("active");$(".daterangepicker-group").removeClass("show-popup");$(this).next(".panel-data-wrapper[data-panel]").siblings("[data-panel]").removeClass("active");$(this).next(".panel-data-wrapper[data-panel]").toggleClass("active");n.preventDefault()});$(".panel-collapse").on("show.bs.collapse",function(){$(this).siblings(".panel-heading").addClass("active")});$(".panel-collapse").on("hide.bs.collapse",function(){$(this).siblings(".panel-heading").removeClass("active")});if($(".accordion-wrapper .accordion-item .card-header h5.grp-label").each(function(){var n=$(this).text();$(this).parents(".accordion-item").find(".card-body .panel-label .title p").prepend('<span class="cloned">'+n+"<\/span>")}),nt=$(".custom-nav-tabs-filled .nav-tabs a, .custom-nav-tabs-filled .tab-content .tab-select-mobile"),tt=$(".custom-nav-tabs-filled .tab-content .tab-pane"),$(nt).click(function(n){var t=$(this).attr("href");$(tt.selector).removeClass("active");$(nt).removeClass("active");$(tt.selector+t).addClass("active");$(this).addClass("active");n.preventDefault()}),$(".custom-accordian .panel-title").click(function(n){$(this).parents(".panel").siblings().find(".collapse").removeClass("in show");$(this).parents(".panel").siblings().find(".panel-heading").removeClass("active");n.preventDefault()}),$(".th-head").hover(function(){$(this).toggleClass("active");var n=$(this).index()+1;$(this).parents(".custom-nested-table").find(".week-table > tbody > tr > td:nth-child("+n+")").toggleClass("active").siblings().removeClass("active")}),ft=$(".nested-tab-nav ul.tab-nav li a"),$(ft).click(function(n){var t=$(this).attr("href");$(this).parent().addClass("active").siblings().removeClass("active");$(this).parents(".nested-tab").find(".nested-tab-panel"+t).addClass("active").siblings().removeClass("active");n.preventDefault()}),$(".btn-group > .btn").click(function(){$(".btn-group > .btn").removeClass("active");$(this).addClass("active")}),$(".btn-group > .btn-default:first-child").click(function(){$(this).siblings().toggleClass("btn-default-active")}),$(window).width()<768&&$("section.featured-flight-booking .title .btn").appendTo(".featured-flight-booking-inner"),$(".map-data-control").click(function(){$(".map-data-list.map-data-strip, .map-data-list").toggleClass("active").stop()}),$(".generate-dynamic-booking-urls .card").each(function(){var n=$("#flexibleDatesOneWayDeparture").val(),r=$(this).data("origin"),u=$(this).data("destination"),t=new Date,f=moment(t).format("D"),e=moment(t).format("YYYY-M"),i;n=n?!0:!1;i=basePortalURL+"?culture="+cultureData+"&querystring=true&isflexible=false&RadioButtonMarketStructure=OneWay&Origin1="+r+"&Destination1="+u+"&Day1="+f+"&MonthYear1="+e+"&ADT=1&INFANT=0&CHD=0";$(this).find(".btn").attr("href",i)}),a=new Bloodhound({queryTokenizer:Bloodhound.tokenizers.whitespace,datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name","country","code"),identify:function(n){return n.code}}),$(".single-date-picker-schedule").length)$(".single-date-picker-schedule").on("focus",function(){var i=$(this).attr("id"),f="#"+i+"_range_picker",n="#"+i,t=new Date,r,u;$(this).parents().hasClass("hidden-field-group")&&($(this).parents(".form-wrap").index()!=0?(r=$(this).parents(".form-wrap").prev().find(".single-date-picker").val(),r!=""&&(t=r)):(u=$(".sub-panel-data#multi-city .form-wrap.active").find(".single-date-picker").val(),u!=""&&(t=u)));$(n).dateRangePicker({format:"ddd MMM DD YYYY",inline:!0,stickyMonths:!0,container:f,showTopbar:!1,singleDate:!0,startDate:t,hoveringTooltip:!1,alwaysOpen:!0,customArrowPrevSymbol:'<i class="icon icon-arrow-down"><\/i>',customArrowNextSymbol:'<i class="icon icon-arrow-up"><\/i>'}).bind("datepicker-change",function(t,r){$("#"+i).val(r.value);$(n).parents(".group-field-wrap").find(".range-picker-wrap").removeClass("active");$(n).parents(".daterangepicker-single").find(".float-label-wrapper").addClass("populated");$(n).parents(".daterangepicker-single").removeClass("show-popup");var u=t.currentTarget.tabIndex+1;$(this).parents(".sub-panel-data").find('input[tabindex="'+u+'"]').focus();$(this).parents(".sub-panel-data").find('input[tabindex="'+u+'"]').hasClass("dropdown-toggle")&&(navigator.userAgent.match(/iPad|iPhone|Android|BlackBerry|Windows Phone|webOS/i)||$(this).parents(".sub-panel-data").find('input[tabindex="'+u+'"]').next(".dropdown-menu").toggleClass("show"));$(this).parents(".form-wrap").nextAll().find(".single-date-picker-schedule").val("");$(this).parents(".form-wrap").nextAll().find(".daterangepicker-single").find(".float-label-wrapper").removeClass("populated");checkValid();$(n).blur()}).click(function(t){$(".dropdown-toggle + .dropdown-menu").removeClass("show");$(".daterangepicker-single").find(".range-picker-wrap").removeClass("active");$(n).parents(".daterangepicker-single").find(".range-picker-wrap").addClass("active");$(".isFlexibleCheckbox").addClass("active");$(n).parents(".daterangepicker-single").addClass("show-popup");t.stopPropagation()});$(n).data("dateRangePicker").setStart(moment(t).format("ddd MMM DD YYYY"))});if($(".flight-status-datepicker").length)$(".flight-status-datepicker").on("focus",function(){var r=$(this).attr("id"),o="#"+r+"_range_picker",n="#"+r,t=new Date,i,e,u,f;t.setDate(t.getDate()-1);i=new Date;i.setDate(i.getDate()+1);e=new Date;$(this).parents().hasClass("hidden-field-group")&&($(this).parents(".form-wrap").index()!=0?(u=$(this).parents(".form-wrap").prev().find(".daterangepicker-single").val(),u!=""&&(t=u)):(f=$(".sub-panel-data#multi-city .form-wrap.active").find(".daterangepicker-single").val(),f!=""&&(t=f)));$(n).dateRangePicker({format:"ddd MMM DD YYYY",inline:!0,stickyMonths:!0,container:o,showTopbar:!1,singleDate:!0,startDate:t,endDate:i,minDate:t,maxDate:i,hoveringTooltip:!1,alwaysOpen:!0,customArrowPrevSymbol:'<i class="icon icon-arrow-down"><\/i>',customArrowNextSymbol:'<i class="icon icon-arrow-up"><\/i>'}).bind("datepicker-change",function(t,i){$("#"+r).val(i.value);$(n).parents(".group-field-wrap")?.find(".range-picker-wrap")?.removeClass("active");$(n).parents(".daterangepicker-single")?.find(".float-label-wrapper")?.addClass("populated");$(n).parents(".daterangepicker-single")?.removeClass("show-popup");$(this).parents(".form-wrap")?.nextAll()?.find(".single-date-picker")?.val("");$(this).parents(".form-wrap")?.nextAll()?.find(".daterangepicker-single")?.find(".float-label-wrapper")?.removeClass("populated");checkValid();$("#search_flight_button")?.prop("disabled",!1);$(n).blur()}).click(function(t){$(".dropdown-toggle + .dropdown-menu").removeClass("show");$(n).parents(".daterangepicker-single")?.find(".range-picker-wrap")?.addClass("active");$(n).parents(".daterangepicker-single")?.addClass("show-popup");t.stopPropagation()});$(n).data("dateRangePicker").setStart(moment(e).format("ddd MMM DD YYYY"))});$(".date-picker-wrapper").on("click","table .caption",function(){st()});viewportWidth<992&&$(".range-picker-wrap .date-picker-wrapper").css("max-height",windowHeight-150);$(".panel-table-wrap input[type=radio]").change(function(){var t=$(this).parents(".panel-table-wrap").find(".checkbox-wrap input").is(":checked"),n;t&&(n=$(this).parents("td").index(),$(this).parents(".panel-table-row").siblings().find("td").find("input[type=radio]").prop("checked",!1),$(this).parents(".panel-table-row").siblings().each(function(){$(this).find("td").eq(n).find("input[type=radio]").prop("checked",!0)}))});$(".panel-table-wrap input[type=checkbox]").change(function(){var t=$(this).parents(".panel-table-wrap").find(".checkbox-wrap input").is(":checked"),n;t&&(n=3,$(this).parents("thead").next("tbody").find(".panel-table-row").each(function(){var t=$(this).find("input[type=radio]:checked").parents("td").index();t!=3&&(n=t)}),$(this).parents("thead").next("tbody").find(".panel-table-row td").find("input[type=radio]").prop("checked",!1),$(this).parents("thead").next("tbody").find(".panel-table-row").each(function(){$(this).find("td").eq(n).find("input[type=radio]").prop("checked",!0)}))});$(".mdropdown").on("click",function(){$(this).hasClass("active")?$(".mdropdownOptions").addClass("show"):$(".mdropdownOptions").removeClass("show")});$(".search-panel").on("click",function(){$(this).parent().hasClass("active")?bodyFreezeScroll():bodyUnfreezeScroll()});$(".main-nav > li .sub-menu").on("click",function(){$(this).parent().hasClass("active")?($(".jazeera_overlay").addClass("active"),bodyFreezeScroll()):($(".jazeera_overlay").removeClass("active"),bodyUnfreezeScroll())});$(".dropdown-wrap").click(function(n){$(this).toggleClass("show");n.preventDefault()});$(".dropdown-toggle").click(function(){var n=$(this).attr("data-toggle");$(this).next("."+n).toggleClass("show")});$(".dropdown-arrow").click(function(){$(this).prev(".dropdown-menu").toggleClass("show")});$(".dropdown-menu .dropdown-option").click(function(){$(this).parents(".dropdown-wrap").find(".dropdown").empty().append($(this).find("h5").html())});$(".custom-select").each(function(){$(this).val()==""?$(this).parents(".form-field").removeClass("populated"):$(this).parents(".form-field").addClass("populated")});$(".custom-select").change(function(){$(this).val()==""?$(this).parents(".form-field").removeClass("populated"):$(this).parents(".form-field").addClass("populated")});$(".custom-nested-table .table-data-head .dropdown").click(function(){$(this).parents(".table-data-head").siblings().removeClass("active");$(this).parents(".table-data-head").siblings().next(".table-data-detail").removeClass("active");$(this).parents(".table-data-head").next(".table-data-detail").toggleClass("active");$(this).parents(".table-data-head").toggleClass("active")});$(".mobile-nested-table").click(function(){$(this).toggleClass("active").siblings().removeClass("active")});$(".flight-info-wrap.departure .packages-footer a.btn").click(function(n){$(".flight-info-wrap.departure").addClass("hide");$(".flight-summary-main-wrap.return").hasClass("show")?$(".flight-summary-main-wrap.departure").removeClass("show"):$(".flight-summary-main-wrap.departure").addClass("show");$("body").scrollTo("section.flight-summary-main-wrap.departure",0);setTimeout(function(){$(".flight-summary-main-wrap.departure a[data-goto-href]").trigger("click")},1e3);n.preventDefault()});$(".flight-info-wrap.return .packages-footer a.btn").click(function(n){$(".flight-info-wrap.departure").addClass("hide");$(".flight-summary-main-wrap.departure").removeClass("show");$(".flight-info-wrap.return").addClass("hide");$(".flight-summary-main-wrap.return").addClass("show");n.preventDefault()});$(".add-ons-status-info-panel .summary-dropdown-wrap").click(function(n){$(this).parents(".add-ons-status-info-panel").siblings().removeClass("show");$(this).parents(".add-ons-status-info-panel").toggleClass("show");n.preventDefault()});$(document).on("click",".switch-flight-info-wrap .date-range-list .date-tab-wrap",function(){$(this).siblings().removeClass("selected");$(this).addClass("selected")});$(".selected-flight-item .modify-flight1 a").click(function(n){var t=$(this).attr("href");t=="#departing_flight"&&($(".flight-info-wrap.departure").removeClass("hide"),$(".flight-summary-main-wrap.departure").removeClass("show"));t=="#return_flight"&&($(".flight-info-wrap.return").removeClass("hide"),$(".flight-summary-main-wrap.return").removeClass("show"));n.preventDefault()});$(".flight-search-result-item .view-detail-btn").click(function(n){$(this).parents(".flight-search-result-item").siblings().find(".flight-info-container .expanded").removeClass("active");$(this).parents(".flight-search-result-item").siblings().find(".flight-info-container .collapsed").addClass("active");$(this).parents(".flight-search-result-item").find(".flight-info-container .collapsed").toggleClass("active");$(this).parents(".flight-search-result-item").find(".flight-info-container .expanded").toggleClass("active");n.preventDefault()});$(".flight-class-item .expand-arrow").click(function(n){$(this).parents(".flight-search-result-item").siblings().find(".expand-arrow").removeClass("active");$(this).parents(".flight-search-result-item").siblings().find(".flight-class-additional-wrap").removeClass("active");var t=$(this).attr("data-class");t=="economy-class"&&($(this).toggleClass("active"),$(this).parents(".flight-search-result-item").find('.expand-arrow[data-class="business-class"]').removeClass("active"),$(this).parents(".flight-search-result-item").find(".flight-class-additional-wrap.economy-class").toggleClass("active"),$(this).parents(".flight-search-result-item").find(".flight-class-additional-wrap.business-class").removeClass("active"));t=="business-class"&&($(this).toggleClass("active"),$(this).parents(".flight-search-result-item").find('.expand-arrow[data-class="economy-class"]').removeClass("active"),$(this).parents(".flight-search-result-item").find(".flight-class-additional-wrap.business-class").toggleClass("active"),$(this).parents(".flight-search-result-item").find(".flight-class-additional-wrap.economy-class").removeClass("active"));n.preventDefault()});$(".flight-class-item").click(function(n){if(viewportWidth<992){$(this).parents(".flight-search-result-item").siblings().removeClass("show-popup");$(this).parents(".flight-search-result-item").siblings().find(".flight-class-item").removeClass("active");$(this).parents(".flight-search-result-item").siblings().find(".flight-class-additional-wrap").removeClass("active");bodyFreezeScroll();var t=$(this).find(".expand-arrow").attr("data-class");t=="economy-class"&&($(this).addClass("active"),$(this).parents(".flight-search-result-item").siblings().removeClass("show-popup"),$(this).parents(".flight-search-result-item").addClass("show-popup"),$(this).parents(".flight-search-result-item").find('.expand-arrow[data-class="business-class"]').parent(".flight-class-item").removeClass("active"),$(this).parents(".flight-search-result-item").find(".flight-class-additional-wrap.economy-class").addClass("active"),$(this).parents(".flight-search-result-item").find(".flight-class-additional-wrap.business-class").removeClass("active"));t=="business-class"&&($(this).addClass("active"),$(this).parents(".flight-search-result-item").siblings().removeClass("show-popup"),$(this).parents(".flight-search-result-item").addClass("show-popup"),$(this).parents(".flight-search-result-item").find('.expand-arrow[data-class="economy-class"]').parent(".flight-class-item").removeClass("active"),$(this).parents(".flight-search-result-item").find(".flight-class-additional-wrap.business-class").addClass("active"),$(this).parents(".flight-search-result-item").find(".flight-class-additional-wrap.economy-class").removeClass("active"))}n.preventDefault()});$(".expand-arrow.active").length==1&&viewportWidth<992&&$(".expand-arrow.active").parents(".flight-class-item").trigger("click");var v=[{recommend:!1,cost:'<div class="cost-info"> <div class="cost-label">From<\/div> <div class="cost"> INR <strong>5,898.00 <\/div><\/div>'},{recommend:!1,cost:'<div class="cost-info"> <div class="cost-label">From<\/div> <div class="cost"> INR <strong>5,238.00 <\/div><\/div>'},{recommend:!1,cost:'<div class="cost-info"> <div class="cost-label">From<\/div> <div class="cost"> INR <strong>5,768.00 <\/div><\/div>'},{recommend:!1,cost:'<div class="cost-info"> <div class="cost-label">From<\/div> <div class="cost"> INR <strong>5,498.00 <\/div><\/div>'},{recommend:!0,cost:'<div class="cost-info"> <div class="cost-label">From<\/div> <div class="cost"> INR <strong>3,898.00 <\/div><\/div>'},{recommend:!1,cost:'<div class="cost-info"> <div class="cost-label">From<\/div> <div class="cost"> INR <strong>7,898.00 <\/div><\/div>'},{recommend:!1,cost:""}],t=[],n=[];viewportWidth>991?(c(moment().format("DD-MM-YYYY"),"",!0),$(".action .select-date-range.next-date-range").click(function(){var n=$(this).find(".hidden-date").html();c(n,"getNextWeek",!0)}),$(".action .select-date-range.prev-date-range").click(function(){var n=$(this).find(".hidden-date").html();c(n,"getLastWeek",!0)})):(c(moment().format("DD-MM-YYYY"),"",!1),$(".action .select-date-range.next-date-range").click(function(){var n=$(this).find(".hidden-date").html();c(n,"getNextWeek",!1)}),$(".action .select-date-range.prev-date-range").click(function(){var n=$(this).find(".hidden-date").html();c(n,"getLastWeek",!1)}));$(".location-select").parent().append('<span class="clearInput"><i class="icon-wrong"><\/i><\/span>');$(".clearInput").click(function(){$("#from_flight_search")&&$("#fromDirect_"+localStorage.from_flight_search).removeClass("active");$("#to_flight_search")&&$("#toDirect_"+localStorage.to_flight_search).removeClass("active");$("#to_flight_search")&&$("#fromDirect1_"+localStorage.to_flight_search).removeClass("active");$("#from_flight_search")&&$("#toDirect1_"+localStorage.from_flight_search).removeClass("active");$("#from_flight_search_oneway")&&$("#fromDirect_"+localStorage.from_flight_search).removeClass("active");$("#to_flight_search_oneway")&&$("#toDirect_"+localStorage.to_flight_search).removeClass("active");$("#from_flight_search_muticity2")&&$("#fromDirect1_"+localStorage.from_flight_searchmulticity2).removeClass("active");$("#to_flight_search_muticity2")&&$("#toDirect1_"+localStorage.to_flight_searchmulticity2).removeClass("active");$("#from_flight_search_muticity1")&&$("#fromDirect_"+localStorage.from_flight_searchmulticity1).removeClass("active");$("#to_flight_search_muticity1")&&$("#toDirect_"+localStorage.to_flight_searchmulticity1).removeClass("active");var n=$(this).parents(".form-field").find("input").attr("data-selected");$(".tt-menu .tt-dataset").find('.tt-suggestion[data-code="'+n+'"]').show();$(this).parents(".form-field").find("input").removeAttr("data-selected");$(this).parents(".form-field").removeClass("populated");$(this).parents(".form-field").find("input").focus().val("").trigger("input").parents(".locations").addClass("show-popup");$(".switchLocations").removeClass("active");$(".specialConditionMainWrapper").hide();checkFlightLocationInputStatus();$(".range-picker-wrap.active").removeClass("active");$(".daterangepicker-single.show-popup").removeClass("show-popup");$(".inline-message").hide();$(".to_terms_activate").removeClass("active");$("#traveladvisory_Body").hide();$("#traveladvisory_Body").removeClass("active")});$(".close-popup").click(function(){$(this).parents().removeClass("show-popup")});$(".switch-sub-panel a").click(function(){$("#from_flight_search")&&$("#fromDirect_"+localStorage.from_flight_search).removeClass("active");$("#to_flight_search")&&$("#toDirect_"+localStorage.to_flight_search).removeClass("active");$("#to_flight_search")&&$("#fromDirect1_"+localStorage.to_flight_search).removeClass("active");$("#from_flight_search")&&$("#toDirect1_"+localStorage.from_flight_search).removeClass("active");$("#from_flight_search_oneway")&&$("#fromDirect_"+localStorage.from_flight_search).removeClass("active");$("#to_flight_search_oneway")&&$("#toDirect_"+localStorage.to_flight_search).removeClass("active");$("#from_flight_search_muticity2")&&$("#fromDirect1_"+localStorage.from_flight_searchmulticity2).removeClass("active");$("#to_flight_search_muticity2")&&$("#toDirect1_"+localStorage.to_flight_searchmulticity2).removeClass("active");$("#from_flight_search_muticity1")&&$("#fromDirect_"+localStorage.from_flight_searchmulticity1).removeClass("active");$("#to_flight_search_muticity1")&&$("#toDirect_"+localStorage.to_flight_searchmulticity1).removeClass("active");$(".inline-message").hide();$(".to_terms_activate").removeClass("active");$("#traveladvisory_Body").hide();$("#traveladvisory_Body").removeClass("active")});$("#traveladvisory_Body").hasClass("active")?$("section.destination-banner").css("margin-top","0px"):$("section.destination-banner").css("margin-top","-80px");$(".passengercount").focus(function(){$("#traveladvisory_Body").hasClass("active")&&$(".jazeera_backdrop").removeClass("active")});$(".travel-backdrop").focus(function(){$("#traveladvisory_Body").hasClass("active")&&$(".jazeera_backdrop").removeClass("active")});$(".travel-backdrop1").focus(function(){$("#traveladvisory_Body").hasClass("active")&&$(".jazeera_backdrop").removeClass("active")});$(".travel-backdrop1").blur(function(){$("#traveladvisory_Body").hasClass("active")&&$(".jazeera_backdrop").removeClass("active")});$(".switchLocations").click(function(n){var t=[],i=[],r=$(this).parents(".form-row").find(".locations:first-child").find(".tt-input").val(),u=$(this).parents(".form-row").find(".locations:first-child").find(".tt-input").attr("data-selected"),f=$(this).parents(".form-row").find(".locations:last-child").find(".tt-input").val(),e=$(this).parents(".form-row").find(".locations:last-child").find(".tt-input").attr("data-selected");r!=""&&f!=""&&(t.push(r,f),i.push(u,e));localStorage.from_flight_search=e;localStorage.to_flight_search=u;localStorage.swapbutton=!0;t.length>1&&($(this).prev().find("input").val(t[1]),$(this).prev().find("input").attr("data-selected",i[1]),$(this).next().find("input").val(t[0]),$(this).next().find("input").attr("data-selected",i[0]),$(".daterangepicker-single").addClass("show-popup"),$(".range-picker-wrap.first-grid").addClass("active"));Lowfaredata();$("#one-way").hasClass("active")?initOneWayDatePicker():initDepartureDatePicker();n.preventDefault()});$(".form-row.row + .hidden-field-group .form-row").each(function(){$(this).append('<div class="close-row"><i class="icon icon-wrong"><\/i><\/div>')});$(".form-row.row + .hidden-field-group .form-row .close-row").click(function(){$(this).parent(".form-row").removeClass("active");$(".form-row.row.form-wrap.active").length<=2&&$("#addFlight").show();$(this).parent(".form-row").find(".single-date-picker").data("dateRangePicker").clear();$(this).parent(".form-row").find(".float-label-wrapper").removeClass("populated");$(this).parent(".form-row").nextAll().find(".float-label-wrapper").removeClass("populated");$(this).parent(".form-row").find("input").val("");$(this).parent(".form-row").nextAll().find("input").val("");$(this).parents(".form-row").find(".locations input").removeAttr("data-selected");$(this).parents(".form-row").nextAll().find(".locations input").removeAttr("data-selected");$(this).parents(".form-row").find(".location-select").typeahead("val","");$(this).parents(".form-row").nextAll().find(".location-select").typeahead("val","");$(".form-row.row + .hidden-field-group .form-row:not(.active)").length>=1?$("#addFlight").removeClass("disabled"):$("#addFlight").addClass("disabled")});$(".promo-wrap .add-promo").click(function(){$(this).toggleClass("hide");$(this).next(".promo-info").addClass("show")})});$(document).ready(function(){function t(){var l=window.location.href.split("/")[3].split("-")[0],a=$(".btn.btn-link.btn-switch.active").attr("id"),o="";if(a==="roundTripTab"){var f=parseInt($("#roundAdult").val())||0,h=parseInt($("#roundChild").val())||0,v=parseInt($("#roundInfant").val())||0,t=parseInt($("#roundExtra").val())||0;v>f&&($("#roundInfant").val(f),v=f);t>f&&t>f+h&&($("#roundExtra_btn_up").prop("disabled",!0),$("#roundExtra").val(t-1),t=t-1);o=i(f,h,v,t,l);$("#passengers_flight_search").val(o).trigger("change").trigger("keyup");f+h>t&&f+h+t<9?($("#roundExtra_btn_up").prop("disabled",!1),$("#roundExtra").val(t)):($("#roundExtra_btn_up").prop("disabled",!0),$("#roundExtra").val(t))}else if(a==="oneWayTab"){var r=parseInt($("#oneWayAdult").val())||0,s=parseInt($("#oneWayChild").val())||0,y=parseInt($("#oneWayInfant").val())||0,n=parseInt($("#oneWayExtra").val())||0;y>r&&($("#oneWayInfant").val(r),y=r);n>r&&n>r+s&&($("#oneWayExtra_btn_up").prop("disabled",!0),$("#oneWayExtra").val(n-1),n=n-1);o=i(r,s,y,n,l);$("#passengers_flight_search_oneway").val(o).trigger("change").trigger("keyup");r+s>n&&r+s+n<9?($("#oneWayExtra_btn_up").prop("disabled",!1),$("#oneWayExtra").val(n)):($("#oneWayExtra_btn_up").prop("disabled",!0),$("#oneWayExtra").val(n));n>r&&n>r+s&&($("#oneWayExtra_btn_up").prop("disabled",!0),$("#oneWayExtra").val(n-1))}else if(a==="multiCityTab"){var e=parseInt($("#multiWayAdult").val())||0,c=parseInt($("#multiWayChild").val())||0,p=parseInt($("#multiWayInfant").val())||0,u=parseInt($("#multiWayExtra").val())||0;p>e&&($("#multiWayInfant").val(e),p=e);u>e&&u>e+c&&($("#multiWayExtra_btn_up").prop("disabled",!0),$("#multiWayExtra").val(u-1),u=u-1);o=i(e,c,p,u,l);$("#passengers_flight_search_multi_city").val(o).trigger("change").trigger("keyup");e+c>u&&e+c+u<9?($("#multiWayExtra_btn_up").prop("disabled",!1),$("#multiWayExtra").val(u)):($("#multiWayExtra_btn_up").prop("disabled",!0),$("#multiWayExtra").val(u))}}function i(n,t,i,r,u){var f="";return u==="ar"?(n>0&&(f+=n===1?n+" بالغ, ":n+" بالغون,"),t>0&&(f+=t===1?t+" طفل, ":t+" الأطفال,"),i>0&&(f+=i===1?i+" رضيع, ":i+" رُضّع,"),r>0&&(f+=r===1?r+" مقعد مزدوج":r+" مقعد مزدوج")):u==="ru"?(n>0&&(f+=n===1?n+" Взрослый, ":n+" Взрослые,"),t>0&&(f+=t===1?t+" Ребенок, ":t+" Дети,"),i>0&&(f+=i===1?i+" Младенец, ":i+" Младенцы,"),r>0&&(f+=r===1?r+" Место Duo":r+" Место Duo")):(n>0&&(f+=n===1?n+" Adult,":n+" Adults,"),t>0&&(f+=t===1?t+" Children,":t+" Childrens,"),i>0&&(f+=i===1?i+" Infant,":i+" Infants,"),r>0&&r>0&&(f+=r===1?r+" Duo Seat":r+" Duo Seats")),f.replace(/,\s*$/,"")}function r(n,i,r){var u=window.location.href.split("/")[3].split("-")[0];const f=document.getElementById("oneWayAdult").value,e=n?($("#oneWayChild").val(0),0):document.getElementById("oneWayChild").value,o=r?($("#oneWayExtra").val(0),0):document.getElementById("oneWayExtra").value,s=i?($("#oneWayInfant").val(0),0):document.getElementById("oneWayInfant").value;var c=u==="ru"?f>1?"Взрослые":"взрослый":u==="ar"?f>1?"بالغين":"بالغ":f>1?"Adults":"Adult",l=u==="ru"?e>1?"Дети":"Ребенок":u==="ar"?e>1?"الأطفال":"طفل":e>1?"Childrens":"Child",a=u==="ru"?s>1?"Младенцы":"Младенец":u==="ar"?s>1?"رُضّع":"رضيع":s>1?"Infants":"Infant",v=u==="ru"?o>1?"Место Duo":"Место Duo":u==="ar"?o>1?"مقعد مزدوج":"مقعد مزدوج":o>1?"Duo Seats":"Duo Seat";let h=`${f} ${c}`;h+=n?"":`, ${e} ${l}`;h+=i?"":`, ${s} ${a}`;h+=r?"":`, ${o} ${v}`;$("#passengers_flight_search_oneway").val(h);t()}function u(n,i,r){var u=window.location.href.split("/")[3].split("-")[0];const f=document.getElementById("roundAdult").value,e=n?($("#roundChild").val(0),0):document.getElementById("roundChild").value,o=r?($("#roundExtra").val(0),0):document.getElementById("roundExtra").value,s=i?($("#roundInfant").val(0),0):document.getElementById("roundInfant").value;var c=u==="ru"?f>1?"Взрослые":"взрослый":u==="ar"?f>1?"بالغين":"بالغ":f>1?"Adults":"Adult",l=u==="ru"?e>1?"Дети":"Ребенок":u==="ar"?e>1?"الأطفال":"طفل":e>1?"Childrens":"Child",a=u==="ru"?s>1?"Младенцы":"Младенец":u==="ar"?s>1?"رُضّع":"رضيع":s>1?"Infants":"Infant",v=u==="ru"?o>1?"Место Duo":"Место Duo":u==="ar"?o>1?"مقعد مزدوج":"مقعد مزدوج":o>1?"Duo Seats":"Duo Seat";let h=`${f} ${c}`;h+=n?"":`, ${e} ${l}`;h+=i?"":`, ${s} ${a}`;h+=r?"":`, ${o} ${v}`;$("#passengers_flight_search").val(h);t()}function f(n,i,r){var u=window.location.href.split("/")[3].split("-")[0];const f=document.getElementById("multiWayAdult").value,e=n?($("#multiWayChild").val(0),0):document.getElementById("multiWayChild").value,o=r?($("#multiWayExtra").val(0),0):document.getElementById("multiWayExtra").value,s=i?($("#multiWayInfant").val(0),0):document.getElementById("multiWayInfant").value;var c=u==="ru"?f>1?"Взрослые":"взрослый":u==="ar"?f>1?"بالغين":"بالغ":f>1?"Adults":"Adult",l=u==="ru"?e>1?"Дети":"Ребенок":u==="ar"?e>1?"الأطفال":"طفل":e>1?"Childrens":"Child",a=u==="ru"?s>1?"Младенцы":"Младенец":u==="ar"?s>1?"رُضّع":"رضيع":s>1?"Infants":"Infant",v=u==="ru"?o>1?"Место Duo":"Место Duo":u==="ar"?o>1?"مقعد مزدوج":"مقعد مزدوج":o>1?"Duo Seats":"Duo Seat";let h=`${f} ${c}`;h+=n?"":`, ${e} ${l}`;h+=i?"":`, ${s} ${a}`;h+=r?"":`, ${o} ${v}`;$("#passengers_flight_search_multi_city").val(h);t()}if($.fn.spinner){$("[data-trigger='spinner']").each(function(){var i=$(this),n=i.find("input"),r=n.data("min"),u=n.data("max");i.spinner({min:r,max:u,change:function(){t()},spin:function(){t()}});i.find("button[data-spin='down']").on("click",function(){var i=parseInt(n.val());i>r&&n.val(i-1).trigger("change");t()});i.find("button[data-spin='up']").on("click",function(){var i=parseInt(n.val());i<u&&n.val(i+1).trigger("change");t()})});$('a[data-toggle="tab"]').on("shown.bs.tab",function(){setTimeout(t,100)})}else console.error("Spinner function is not available. Please ensure jQuery UI is included.");var n=window.location.href.split("/")[3].split("-")[0];$("#PaxTypes_oneway").change(function(){var s=$("#PaxTypes_oneway").find(":selected").val(),h=$("#PaxTypes_oneway option:selected").text(),c;$(".onewayPromo-info").hide();let u=document.getElementById("onewaytermsandconditions"),i="";c=JSON.parse(localStorage.getItem("PassengerDiscountPromoCodes"));const t=c.data.find(n=>(n.promoCode.toUpperCase()===s.toUpperCase()||!s||n.promoCode==="")&&(n.promoName.toUpperCase()===h.toUpperCase()||n.promoNameArabic.toUpperCase()===h.toUpperCase()));var f=!1,e=!1,o=!1;if(t)if(f=t?.flightSearch.includes("CHD")?!1:!0,e=t?.flightSearch.includes("INFT")?!1:!0,o=t?.flightSearch.includes("DUO")?!1:!0,f?$("#onewaybookingchild").hide():$("#onewaybookingchild").show(),e?$("#onewaybookinginfant").hide():$("#onewaybookinginfant").show(),o?$("#onewaybookingdueseat").hide():$("#onewaybookingdueseat").show(),n==="ar")if(t.arabicSpecialFareTC&&t.arabicSpecialFareTC.length>0){$("#onewayspecialConditionMainWrapper").show();for(let n=0;n<t.arabicSpecialFareTC.length;n++)i+="<p>"+t.arabicSpecialFareTC[n]+"<\/p>";u.innerHTML=i}else $("#onewayspecialConditionMainWrapper").hide();else if(n==="ru")if(t.russiaSpecialFareTC&&t.russiaSpecialFareTC.length>0){$("#onewayspecialConditionMainWrapper").show();for(let n=0;n<t.russiaSpecialFareTC.length;n++)i+="<p>"+t.russiaSpecialFareTC[n]+"<\/p>";u.innerHTML=i}else $("#onewayspecialConditionMainWrapper").hide();else if(t.englishSpecialFareTC&&t.englishSpecialFareTC.length>0){$("#onewayspecialConditionMainWrapper").show();for(let n=0;n<t.englishSpecialFareTC.length;n++)i+="<p>"+t.englishSpecialFareTC[n]+"<\/p>";u.innerHTML=i}else $("#onewayspecialConditionMainWrapper").hide();else $(".onewayPromo-info").show(),$("#onewaybookingchild,#onewaybookinginfant, #onewaybookingdueseat").show(),$("#onewayspecialConditionMainWrapper").hide();r(f,e,o)});$("#PaxTypes_return").change(function(){var r,f,c;$(".returnPromo-info").hide();r=$("#PaxTypes_return").find(":selected").val();f=$("#PaxTypes_return option:selected").text();let e=document.getElementById("returntermsandconditions"),i="";c=JSON.parse(localStorage.getItem("PassengerDiscountPromoCodes"));const t=c.data.find(n=>(n.promoCode.toUpperCase()===r.toUpperCase()||!r||n.promoCode==="")&&(n.promoName.toUpperCase()===f.toUpperCase()||n.promoNameArabic.toUpperCase()===f.toUpperCase()));var o=!1,s=!1,h=!1;if(t)if(o=t?.flightSearch.includes("CHD")?!1:!0,s=t?.flightSearch.includes("INFT")?!1:!0,h=t?.flightSearch.includes("DUO")?!1:!0,o?$("#bookingchild").hide():$("#bookingchild").show(),s?$("#bookinginfant").hide():$("#bookinginfant").show(),h?$("#bookingduoseat").hide():$("#bookingduoseat").show(),n==="ar")if(t.arabicSpecialFareTC&&t.arabicSpecialFareTC.length>0){$("#returnspecialConditionMainWrapper").show();for(let n=0;n<t.arabicSpecialFareTC.length;n++)i+="<p>"+t.arabicSpecialFareTC[n]+"<\/p>";e.innerHTML=i}else $("#returnspecialConditionMainWrapper").hide();else if(n==="ru")if(t.russiaSpecialFareTC&&t.russiaSpecialFareTC.length>0){$("#returnspecialConditionMainWrapper").show();for(let n=0;n<t.russiaSpecialFareTC.length;n++)i+="<p>"+t.russiaSpecialFareTC[n]+"<\/p>";e.innerHTML=i}else $("#returnspecialConditionMainWrapper").hide();else if(t.englishSpecialFareTC&&t.englishSpecialFareTC.length>0){$("#returnspecialConditionMainWrapper").show();for(let n=0;n<t.englishSpecialFareTC.length;n++)i+="<p>"+t.englishSpecialFareTC[n]+"<\/p>";e.innerHTML=i}else $("#returnspecialConditionMainWrapper").hide();else $(".returnPromo-info").show(),$("#bookingchild,#bookinginfant, #bookingduoseat").show(),$("#returnspecialConditionMainWrapper").hide();u(o,s,h)});$("#PaxTypes_multi").change(function(){var u=$("#PaxTypes_multi").find(":selected").val(),e=$("#PaxTypes_multi option:selected").text(),o;let r=document.getElementById("multitermsandconditions"),i="";$(".multiPromo-info").hide();o=JSON.parse(localStorage.getItem("PassengerDiscountPromoCodes"));const t=o.data.find(n=>(n.promoCode.toUpperCase()===u.toUpperCase()||!u||n.promoCode==="")&&(n.promoName.toUpperCase()===e.toUpperCase()||n.promoNameArabic.toUpperCase()===e.toUpperCase()));var s=!1,h=!1,c=!1;if(t){var s=t?.flightSearch.includes("CHD")?!1:!0,h=t?.flightSearch.includes("INFT")?!1:!0,c=t?.flightSearch.includes("DUO")?!1:!0;if(s?$("#multibookingchild").hide():$("#multibookingchild").show(),h?$("#multibookinginfant").hide():$("#multibookinginfant").show(),c?$("#multibookingduoseat").hide():$("#multibookingduoseat").show(),n==="ar")if(t.arabicSpecialFareTC&&t.arabicSpecialFareTC.length>0){$("#multispecialConditionMainWrapper").show();for(let n=0;n<t.arabicSpecialFareTC.length;n++)i+="<p>"+t.arabicSpecialFareTC[n]+"<\/p>";r.innerHTML=i}else $("#multispecialConditionMainWrapper").hide();else if(n==="ru")if(t.russiaSpecialFareTC&&t.russiaSpecialFareTC.length>0){$("#multispecialConditionMainWrapper").show();for(let n=0;n<t.russiaSpecialFareTC.length;n++)i+="<p>"+t.russiaSpecialFareTC[n]+"<\/p>";r.innerHTML=i}else $("#multispecialConditionMainWrapper").hide();else if(t.englishSpecialFareTC&&t.englishSpecialFareTC.length>0){$("#multispecialConditionMainWrapper").show();for(let n=0;n<t.englishSpecialFareTC.length;n++)i+="<p>"+t.englishSpecialFareTC[n]+"<\/p>";r.innerHTML=i}else $("#multispecialConditionMainWrapper").hide()}else $(".multiPromo-info").show(),$("#multibookingchild,#multibookinginfant, #multibookingduoseat").show(),$("#multispecialConditionMainWrapper").hide();f(s,h,c)});$("#flight_search_promo_code_oneway").on("input",function(){var u,e;$(".passenger_type").hide();u=$(this).val().trim();let f=document.getElementById("onewaytermsandconditions"),i="";e=JSON.parse(localStorage.getItem("PassengerDiscountPromoCodes"));const t=e.data.find(n=>n.promoCode!==""&&n.promoCode.toUpperCase()===u.toUpperCase());var o=!1,s=!1,h=!1;if(t){var o=t?.flightSearch.includes("CHD")?!1:!0,s=t?.flightSearch.includes("INFT")?!1:!0,h=t?.flightSearch.includes("DUO")?!1:!0;if(o?$("#onewaybookingchild").hide():$("#onewaybookingchild").show(),s?$("#onewaybookinginfant").hide():$("#onewaybookinginfant").show(),h?$("#onewaybookingdueseat").hide():$("#onewaybookingdueseat").show(),n==="ar")if(t.arabicSpecialFareTC&&t.arabicSpecialFareTC.length>0){$("#onewayspecialConditionMainWrapper").show();for(let n=0;n<t.arabicSpecialFareTC.length;n++)i+="<p>"+t.arabicSpecialFareTC[n]+"<\/p>";f.innerHTML=i}else $("#onewayspecialConditionMainWrapper").hide();else if(n==="ru")if(t.russiaSpecialFareTC&&t.russiaSpecialFareTC.length>0){$("#onewayspecialConditionMainWrapper").show();for(let n=0;n<t.russiaSpecialFareTC.length;n++)i+="<p>"+t.russiaSpecialFareTC[n]+"<\/p>";f.innerHTML=i}else $("#onewayspecialConditionMainWrapper").hide();else if(t.englishSpecialFareTC&&t.englishSpecialFareTC.length>0){$("#onewayspecialConditionMainWrapper").show();for(let n=0;n<t.englishSpecialFareTC.length;n++)i+="<p>"+t.englishSpecialFareTC[n]+"<\/p>";f.innerHTML=i}else $("#onewayspecialConditionMainWrapper").hide()}else $("#onewaybookingchild").show(),$("#onewaybookinginfant, #onewaybookingdueseat").show(),$(".validate.success").hide(),$("#onewayspecialConditionMainWrapper").hide();r(o,s,h);u===""&&($(".passenger_type").show(),$("#onewayspecialConditionMainWrapper").hide())});$("#flight_search_muticity_promo_code").on("input",function(){var r,h;$(".multiPassenger_type").hide();r=$(this).val().trim().toLowerCase();let u=document.getElementById("multitermsandconditions"),i="";h=JSON.parse(localStorage.getItem("PassengerDiscountPromoCodes"));const t=h.data.find(n=>n.promoCode!==""&&n.promoCode.toUpperCase()===r.toUpperCase());var e=!1,o=!1,s=!1,c=window.location.href.split("/")[3].split("-")[0];if(t)if(e=t?.flightSearch.includes("CHD")?!1:!0,o=t?.flightSearch.includes("INFT")?!1:!0,s=t?.flightSearch.includes("DUO")?!1:!0,e?$("#multibookingchild").hide():$("#multibookingchild").show(),o?$("#multibookinginfant").hide():$("#multibookinginfant").show(),s?$("#multibookingduoseat").hide():$("#multibookingduoseat").show(),n==="ar")if(t.arabicSpecialFareTC&&t.arabicSpecialFareTC.length>0){$("#multispecialConditionMainWrapper").show();for(let n=0;n<t.arabicSpecialFareTC.length;n++)i+="<p>"+t.arabicSpecialFareTC[n]+"<\/p>";u.innerHTML=i}else $("#multispecialConditionMainWrapper").hide();else if(n==="ru")if(t.russiaSpecialFareTC&&t.russiaSpecialFareTC.length>0){$("#multispecialConditionMainWrapper").show();for(let n=0;n<t.russiaSpecialFareTC.length;n++)i+="<p>"+t.russiaSpecialFareTC[n]+"<\/p>";u.innerHTML=i}else $("#multispecialConditionMainWrapper").hide();else if(t.englishSpecialFareTC&&t.englishSpecialFareTC.length>0){$("#multispecialConditionMainWrapper").show();for(let n=0;n<t.englishSpecialFareTC.length;n++)i+="<p>"+t.englishSpecialFareTC[n]+"<\/p>";u.innerHTML=i}else $("#multispecialConditionMainWrapper").hide();else $("#multibookingchild, #multibookinginfant, #multibookingduoseat").show(),$(".validate.success").hide(),$("#multispecialConditionMainWrapper").hide();f(e,o,s);r===""&&($(".multiPassenger_type").show(),$("#multispecialConditionMainWrapper").hide())});$("#flight_search_promo_code").on("input",function(){var r,h;$(".returnPassenger_type").hide();r=$(this).val().trim().toLowerCase();let f=document.getElementById("returntermsandconditions"),i="";h=JSON.parse(localStorage.getItem("PassengerDiscountPromoCodes"));const t=h.data.find(n=>n.promoCode!==""&&n.promoCode.toUpperCase()===r.toUpperCase());var e=!1,o=!1,s=!1;if(t)if(e=t?.flightSearch.includes("CHD")?!1:!0,o=t?.flightSearch.includes("INFT")?!1:!0,s=t?.flightSearch.includes("DUO")?!1:!0,e?$("#bookingchild").hide():$("#bookingchild").show(),o?$("#bookinginfant").hide():$("#bookinginfant").show(),s?$("#bookingduoseat").hide():$("#bookingduoseat").show(),n==="ar")if(t.arabicSpecialFareTC&&t.arabicSpecialFareTC.length>0){$("#returnspecialConditionMainWrapper").show();$("#returntermsandconditions").show();for(let n=0;n<t.arabicSpecialFareTC.length;n++)i+="<p>"+t.arabicSpecialFareTC[n]+"<\/p>";f.innerHTML=i}else $("#returnspecialConditionMainWrapper").hide(),$("#returntermsandconditions").hide();else if(n==="ru")if(t.russiaSpecialFareTC&&t.russiaSpecialFareTC.length>0){$("#returnspecialConditionMainWrapper").show();$("#returntermsandconditions").show();for(let n=0;n<t.russiaSpecialFareTC.length;n++)i+="<p>"+t.russiaSpecialFareTC[n]+"<\/p>";f.innerHTML=i}else $("#returnspecialConditionMainWrapper").hide(),$("#returntermsandconditions").hide();else if(t.englishSpecialFareTC&&t.englishSpecialFareTC.length>0){$("#returnspecialConditionMainWrapper").show();$("#returntermsandconditions").show();for(let n=0;n<t.englishSpecialFareTC.length;n++)i+="<p>"+t.englishSpecialFareTC[n]+"<\/p>";f.innerHTML=i}else $("#returnspecialConditionMainWrapper").hide(),$("#returntermsandconditions").hide();else $("#bookingchild, #bookinginfant, #bookingduoseat").show(),$(".validate.success").hide(),$("#returnspecialConditionMainWrapper").hide();u(e,o,s);r===""&&($(".returnPassenger_type").show(),$("#returnspecialConditionMainWrapper").hide())})});$(document).mouseup(function(n){var o=$(".group-field-wrap"),t,i,r,u,f,e;o.is(n.target)||o.has(n.target).length!==0||n.target==$("html").get(0)||($(".range-picker-wrap").removeClass("active"),$(".isFlexibleCheckbox").removeClass("active"));t=$(".dropdown-wrap");t.is(n.target)||t.has(n.target).length!==0||t.removeClass("show");i=$(".form-field");i.is(n.target)||i.has(n.target).length!==0||$(".dropdown-menu").removeClass("show");r=$("header .header-inner .main-nav > li");r.is(n.target)||r.has(n.target).length!==0||$(".sub-menu").parent().removeClass("active");u=$(".search-box-wrap .search-panel");u.is(n.target)||u.has(n.target).length!==0||$(".search-box-wrap").removeClass("active");f=$(".modify-search-wrap .search-panel");f.is(n.target)||f.has(n.target).length!==0||$(".modify-search-wrap").removeClass("active");e=$("header .header-inner .toggle-btns li");e.is(n.target)||e.has(n.target).length!==0||($(".btn-dropdown-menu").removeClass("show"),$(".btn.btn-dropdown").removeClass("active"),isheaderActive())});$("#menu").mouseenter(function(){bodyFreezeScroll()});$(".mCustomScrollBox").mouseleave(function(){bodyUnfreezeScroll()});$(".isFlexibleCheckbox").click(function(){$(this).next(".group-field-wrap").find(".range-picker-wrap").hasClass("active")||$(this).next(".group-field-wrap").find(".range-picker-wrap").addClass("active");$(".isFlexibleCheckbox").hasClass("active")||$(".isFlexibleCheckbox").toggleClass("active")});